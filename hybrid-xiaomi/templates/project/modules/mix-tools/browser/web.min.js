(this.nativeLog||function(e){console.log(e)})("### App Framework ### Start: 0.0.6 Build 20180124");var global=this,process={env:{}},setTimeout=global.setTimeout;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=Ki(t),this.reject=Ki(r)}function r(){Vl.forEach(function(e){var t=Vl.indexOf(e);Gl[e]={},Vl.forEach(function(r){Vl.indexOf(r)<=t&&(Gl[e][r]=!0)})})}function n(e){var t=global.Env&&global.Env.logLevel||"log";return Gl[t]&&Gl[t][e]}function o(){r();var e=function(e){return!global.Env||!1!==global.Env.logHash.na||"string"!=typeof e||0!==e.indexOf("### App Framework ###")},t=global.Env&&"trace"===global.Env.logLevel&&console.trace,o=console.debug,a=console.log,i=console.info,l=console.warn,s=console.error,c=console;console._ori={trace:t,debug:o,log:a,info:i,warn:l,error:s},c.trace=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("trace")&&console._ori.trace.apply(console,t)},c.debug=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("debug")&&console._ori.debug.apply(console,t)},c.log=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("log")&&console._ori.log.apply(console,t)},c.info=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("info")&&console._ori.info.apply(console,t)},c.warn=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("warn")&&console._ori.warn.apply(console,t)},c.error=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("error")&&console._ori.error.apply(console,t)};var u={};["debug","log","info","warn","error"].forEach(function(e){u[e]=function(){}}),c.curry=function(e){var t=global.Env.logHash;return t[e]&&t[e].off?u:console}}function a(){Gl={},global.console=ql}function i(){}function l(){global.history=Hl}function s(){var e={},t=0;"function"==typeof es&&(global.setTimeoutWrap=function(r,n,o){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setTimeoutWrap "+t+"----"),es(r,t,o),t},global.setTimeout=function(e,t){return global.setTimeoutWrap(-1,e,t)},global.setTimeoutCallback=function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setTimeout 执行回调 "+t+"----"),"function"==typeof e[t]&&(e[t](),delete e[t])},global.clearTimeout=global.clearTimeoutWrap=function(t){"function"==typeof Ql&&Ql(t),"function"===e[t]?delete e[t]:e[t]=void 0}),"function"==typeof rs&&(global.setIntervalWrap=function(r,n,o){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setIntervalWrap "+t+"----"),rs(r,t,o),t},global.setInterval=function(e,t){return global.setIntervalWrap(-1,e,t)},global.setIntervalCallback=function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setInterval 执行回调 "+t+"----"),"function"==typeof e[t]&&e[t]()},global.clearInterval=global.clearIntervalWrap=function(t){"function"==typeof ts&&ts(t),"function"===e[t]?delete e[t]:e[t]=void 0}),"function"==typeof os&&(global.requestAnimationFrameWrap=function(r,n){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### requestAnimationFrame "+t+"----"),os(t),t},global.requestAnimationFrame=function(e){return global.requestAnimationFrameWrap(-1,e)},global.requestAnimationFrameCallback=function(r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### requestAnimationFrame 执行回调 "+t+"----"),"function"==typeof e[r]&&e[r]()},global.cancelAnimationFrame=global.cancelAnimationFrameWrap=function(t){"function"==typeof ns&&ns(t),"function"===e[t]?delete e[t]:e[t]=void 0})}function c(){global.setTimeout=Kl,global.clearTimeout=Ql,global.clearTimeoutWrap=null,global.setTimeoutCallback=null,global.setTimeoutWrap=null,global.setInterval=Xl,global.clearInterval=ts,global.clearIntervalWrap=null,global.setIntervalCallback=null,global.setIntervalWrap=null,global.requestAnimationFrame=Yl,global.cancelAnimationFrame=ns,global.cancelAnimationFrameWrap=null,global.requestAnimationFrameCallback=null,global.requestAnimationFrameWrap=null}function u(){Object.freeze(Object),Object.freeze(Array),Object.freeze(Object.prototype),Object.freeze(Array.prototype),Object.freeze(String.prototype),Object.freeze(Number.prototype),Object.freeze(Boolean.prototype),Object.freeze(Error.prototype),Object.freeze(Date.prototype),Object.freeze(RegExp.prototype)}function p(e,t){e&&(is[e]=t)}function f(e){return is[e]}function d(e){delete is[e]}function h(e){var t=is[e];return t&&t.listener?t.listener:null}function v(e,t){f(e).nodeMap[t.ref]=t}function g(e,t){e.parentNode=t,t.docId&&(e.docId=t.docId,e.owner=t.owner,e.owner.nodeMap[e.ref]=e,e.depth=t.depth+1),e.children.forEach(function(t){g(t,e)})}function m(e,t){var r=t||global.callNative;return"function"!=typeof r&&console.error("### App Runtime ### 没有缺省Handler函数"),function(t){return Array.isArray(t)||(t=[t]),r(e,JSON.stringify(t),"-1")}}function y(e,t,r,n){r<0&&(r=0);var o=t[r-1],a=t[r];return t.splice(r,0,e),n&&(o&&(o.nextSibling=e),e.previousSibling=o,e.nextSibling=a,a&&(a.previousSibling=e)),r}function b(e,t,r){var n=t.indexOf(e);if(!(n<0)){if(r){var o=t[n-1],a=t[n+1];o&&(o.nextSibling=a),a&&(a.previousSibling=o)}t.splice(n,1)}}function E(e,t,r,n){var o=t.indexOf(e);if(o<0||o===r)return-1;b(e,t,n);var a=r;return o<=r&&(a=r-1),y(e,t,a,n),r}function w(){return(ls++).toString()}function _(e){return Object.assign({},ps,{score:{sum:us.TAG}},e)}function F(e){return Object.assign({},ps,{score:{sum:us.ID}},e)}function A(e){return Object.assign({},ps,{score:{sum:us.CLASS}},e)}function k(e){return Object.assign({},ps,e)}function S(e){e=e||[];for(var t=0;t<e.length;t++)!function(t){var r=e[t];fs.forEach(function(e){r.hasOwnProperty(e.newN)&&(r[e.oldN]=r[e.newN],delete r[e.newN],e.newV&&e.newV.indexOf(r[e.oldN])>-1&&(r[e.oldN]=e.oldV[e.newV.indexOf(r[e.oldN])]))})}(t);return e}function O(e){for(var t={id:0,class:0,tag:0,sum:0,depth:1},r=0;r<e.length;r++){var n=e[r];"tag"===n.type?t.tag+=1:"attribute"===n.type&&"id"===n.name?t.id+=1:"attribute"===n.type&&"class"===n.name?t.class+=1:"descendant"!==n.type&&"child"!==n.type||(t.depth+=1)}return t.sum=t.id*us.ID+t.class*us.CLASS+t.tag*us.TAG,{sum:t.sum,depth:t.depth}}function L(e,t,r,n,o,a){var i,l=[];r&&l.push(r),o&&l.push(o),i=Object.keys(n);for(var s=0;s<i.length;s++)l.push(n[i[s]]);i=Object.keys(a);for(var c=0;c<i.length;c++)l.push(a[i[c]]);l.sort(function(e,t){return e.score.sum*us.GAP+e.order-(t.score.sum*us.GAP+t.order)});var u=l.map(function(e){return e.style});global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Specificity 执行 buildStyle()---- ",l.map(function(e){return'"'+e.name+'"'}).join(" < "));for(var p=Object.assign.apply(Object,[{}].concat(u,[t])),f=C(e,p),d=0;d<f.length;d++){var h=f[d];void 0!==p[h]&&void 0===e[h]?e[h]=!0:void 0===p[h]&&void 0!==e[h]&&(p[h]="")}return p}function C(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r={},n=0;n<e.length;n++)for(var o in e[n])r[o]=!0;return Object.keys(r)}function x(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"==typeof Object.assign)Object.assign.apply(Object,[e].concat(t));else{var n=t.shift();for(var o in n)e[o]=n[o];t.length&&x.apply(void 0,[e].concat(t))}return e}function N(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})}function I(e,t){if(e.length){var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}function j(e,t){return bs.call(e,t)}function T(e,t){return function(r){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,r):e.call(t)}}function P(e,t,r){ws.indexOf(r)>-1||!B(r)?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){return e[t]?e[t][r]:null},set:function(n){e[t]&&(e[t][r]=n)}}):console.error("### App Framework ### 页面数据属性名 '"+r+"' 非法, 属性名不能以$或_开头")}function $(e,t){!B(t)&&e&&delete e[t]}function R(e){return null!==e&&"object"==typeof e}function D(e){return _s.call(e)===Fs}function B(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(){return"object"==typeof nativeSet?nativeSet.create():new ys}function M(e,t){return t?t.toUpperCase():""}function J(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1).toLowerCase()}function z(e){return e.replace(Cs,"").replace(xs,"").replace(Ns,"")}function q(e){return Ts.indexOf(e)>=0}function V(e){return Ps.indexOf(e)>=0}function G(){return++$s}function U(e,t,r,n){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用对象("+e.id+")的回调("+t+") 参数：",JSON.stringify(r)),!e.callbacks)return new Error('invoke: 回调函数 "'+t+'" 没有注册');if(e.vm&&!e.vm.$valid)return void console.error("invoke: 回调函数所属对象("+e.id+")已经无效, 终止回调执行");var o=e.callbacks[t];if("function"==typeof o){var a=o(r);if(void 0!==n&&!1!==n||(e.callbacks[t]=void 0),e.doc){var i=rr(e);e.vm&&e.vm._ready&&i&&e.doc.listener.updateFinish()}return a}return new Error('invoke: 无效invoke回调函数Id "'+t+'"')}function H(e,t,r,n,o,a){if("feature"===a&&!global.JsBridge)return new Error("invokeNative: JsBridge没有初始化");if("module"===a&&!global.ModuleManager)return new Error("invokeNative: ModuleManager没有初始化");var i="feature"===a?global.JsBridge:global.ModuleManager,l=o.length>0?o[0]:{};l.callback&&(l.success&&console.warn("### App Framework ### invoke函数不能同时出现'success'和'callback'参数"),l.success=l.callback);var s={},c={};for(var u in l){var p=l[u];Js.indexOf(u)>=0?"function"==typeof p?c[u]=p:console.warn("### App Framework ### invoke函数的回调参数"+u+"类型不是function"):"callback"!==u&&(s[u]=Z(p,e))}if(0===n){var f=i.invoke(t,r,JSON.stringify(s),"-1");if(null==f)return void console.warn("### App Framework ### invoke函数 '"+t+"."+r+"' 返回值为null");global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### invoke函数 '"+t+"."+r+"' 调用成功，返回值为: "+f);var d="string"==typeof f?JSON.parse(f):f;return d?d.content:void 0}var h=G();return e.callbacks[h]=function(e){var t=c,r=e.code,n=e.content;0===r&&t.success?t.success(n):100===r&&t.cancel?t.cancel():r>=200&&t.fail&&t.fail(n,r),t.complete&&t.complete(n)},Ms[h]={instance:e.id.toString(),preserved:2===n},i.invoke(t,r,JSON.stringify(s),h.toString())}function Z(e,t){switch(J(e)){case"undefined":case"null":return"";case"regexp":return e.toString();case"date":return e.toISOString();case"number":case"string":case"boolean":case"array":case"object":return e;case"function":var r=G();return t.callbacks?t.callbacks[r]=e:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### normalize() inst实例已经销毁，不再注册回调"),Ms[r]={instance:t.id.toString(),preserved:!1},r.toString();default:return JSON.stringify(e)}}function K(e){var t=Ms[e];return t&&!0===t.preserved||(Ms[e]=void 0),t}function X(e){e.$emit("applc:onDestroy"),e.$clear(),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 成功销毁应用("+e.id+")----")}function Y(e,t){e.__proto__=t}function Q(e,t,r){for(var n=0,o=r.length;n<o;n++){var a=r[n];N(e,a,t[a])}}function ee(e,t,r,n){var o=new Vs,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var i=a&&a.get,l=a&&a.set,s=Us.$ob(r);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=i?i.call(e):r;if(Vs.target&&(o.depend(),s&&s.dep.depend(),Array.isArray(t)))for(var n=void 0,a=0,l=t.length;a<l;a++)(n=t[a])&&n.__ob__&&n.__ob__.dep.depend();return t},set:function(t){t!==(i?i.call(e):r)&&(n&&n(),l?l.call(e,t):r=t,s=Us.$ob(t),o.notify())}})}}function te(e,t){for(var r,n=e.length-1;n>=0;n--){if(!(r=re(e[n],n===e.length-1?[t]:r))||0===r.length)return!1}return!0}function re(e,t){var r=e.type;switch(r){case"attribute":return ne(e,t);case"tag":return oe(e,t);case"descendant":return ae(e,t);case"child":return ie(e,t);default:return console.warn("未知的CSS选择器定义类型："+r+"，当前支持：tag, class, id, 后代, '>'"),[]}}function ne(e,t){if("class"===e.name){if("element"===e.action)return t.filter(function(t){return-1!==t.classList.indexOf(e.value)})}else if("id"===e.name)return t.filter(function(t){return t.id===e.value});return console.warn("未知的CSS选择器属性类型："+e.name+"，当前支持：class, id"),[]}function oe(e,t){return t.filter(function(t){return t.type===e.name})}function ae(e,t){var r=[];return t.forEach(function(e){for(;(e=e.renderParent())&&e.nodeType===ss.nodeType.Element;)r.push(e)}),r}function ie(e,t){var r=[];return t.forEach(function(e){var t=e.renderParent();t&&t.nodeType===ss.nodeType.Element&&r.push(t)}),r}function le(e){var t=e.type,r=Ks[t];if("object"==typeof r)for(var n in r)if(null==e[n])e[n]=r[n];else if("object"===J(e[n])&&"object"===J(r[n]))for(var o in r[n])null==e[n][o]&&(e[n][o]=r[n][o])}function se(e,t,r){me(e,t,r.attr.id,e),ye(e,t,r.attr),be(e,t,r),xe(e,t,r.events)}function ce(e,t,r){Se(e,t)}function ue(e,t,r,n){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 处理自定义组件 ----",JSON.stringify(r)),t=t||{},r=r||{};var o=t._options||{},a=o.props;Array.isArray(a)&&(a=a.reduce(function(e,t){return V(t)&&console.warn("### App Framework ### props 属性 '"+t+"' 是保留字, 可能会导致应用运行异常"),e[t]=!0,e},{})),he(r.events,e,t),fe(n,a,e,t),fe(r.attr,a,e,t)}function pe(e,t,r,n){void 0===n&&(n={}),de(r,e,t),n.children?n.children[n.children.length-1]._vm=t:n._vm=t}function fe(e,t,r,n){if(e){var o=n._props;for(var a in e)!function(a){if(!t||t[a]){var i=e[a];"function"==typeof i?function(){var e=!1,t=Te(r,i,function(t){e=!0,o[a]=t,e=!1});n._parentWatchers.push(t);var l=t.value;ee(o,a,l,function(t){e||console.error("### App Framework ### Props 禁止修改props中的："+a+"!如需改变，请额外在data中使用另一个名称声明")})}():ee(o,a,i),P(n,"_props",a)}}(a)}}function de(e,t,r){ge(e.classList,t,r),ve(e.style,t,r)}function he(e,t,r){for(var n in e)!function(n){var o=e[n];r.$on(Ss(n),function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];t&&t[o]&&"function"==typeof t[o]?t[o].apply(t,e):console.warn("### App Framework ### 组件Vm 子组件绑定了父组件不存在的方法：'"+o+"'")})}(n)}function ve(e,t,r){if(!r._rootElement){for(var n in e)!function(n){var o=e[n];if("function"==typeof o){var a=Te(t,o,function(e){r._rootElement&&r._rootElement.setStyle(n,e)});r._parentWatchers.push(a);var i=a.value;r._rootElement.setStyle(n,i)}else r._rootElement.setStyle(n,o)}(n)}}function ge(e,t,r){function n(e,t){"array"===J(e)&&e.unshift(t)}var o=t._options&&t._options.style||{};if(r._rootElement){var a="@appRootElement";if(o[a]=r._rootElement.classStyle,"function"==typeof e){var i=Te(t,e,function(e){n(e,a),Fe(r._rootElement,o,e)});r._parentWatchers.push(i);var l=i.value;n(l,a),Fe(r._rootElement,o,l)}else if(null!=e){if("array"!==J(e))return new Error("mergeClassStyle: classList的类型不是数组----",e);n(e,a),Fe(r._rootElement,o,e)}}}function me(e,t,r,n){if(r){var o=Object.create(null);if(Object.defineProperties(o,{vm:{value:n,writable:!1,configurable:!1},element:{get:function(){return t||n._rootElement},configurable:!1}}),"function"==typeof r){var a=r;r=a.call(e),r&&(e._ids[r]=o);var i=Te(e,a,function(t){t&&(e._ids[t]=o)},t);e!==n&&n._parentWatchers&&n._parentWatchers.push(i)}else"string"==typeof r&&(e._ids[r]=o)}}function ye(e,t,r){Ne(e,t,"attr",r)}function be(e,t,r){Ee(e,t,r.type),Ae(e,t,r.classList),_e(e,t,r.attr.id),ke(e,t,r.style)}function Ee(e,t,r){var n=e._options&&e._options.style||{},o=n[r],a={};o&&Object.keys(o).forEach(function(e){var t=o[e];if(a[e]=t,"animationName"===e){var r=Le(t,n);r&&(a.animationKeyframes=r)}}),t.setTagStyle(a)}function we(e,t,r){var n="#"+r,o={},a=t[n];a&&Object.keys(a).forEach(function(e){var r=a[e];if(o[e]=r,"animationName"===e){var n=Le(r,t);n&&(o.animationKeyframes=n)}}),e.setIdStyle(o)}function _e(e,t,r){if("function"==typeof r||"string"==typeof r){var n=e._options&&e._options.style||{};if("function"==typeof r){var o=Te(e,r,function(r){t.setId(r),Se(e,t),we(t,n,r)},t),a=o.value;t.setId(a),we(t,n,a)}else t.setId(r),we(t,n,r)}}function Fe(e,t,r){for(var n={},o=r.length,a=Object.keys(t),i=0;i<o;i++)!function(e){var o="."+r[e],i=t[o];i&&(n[o]=A({name:o,order:a.indexOf(o),style:{}}),Object.keys(i).forEach(function(e){var r=i[e];if(n[o].style[e]=r,"animationName"===e){var a=Le(r,t);a&&(n[o].style.animationKeyframes=a)}}))}(i);e.setClassStyle(n)}function Ae(e,t,r){if("function"==typeof r||Array.isArray(r)){if(Array.isArray(r)&&!r.length)return void t.setClassStyle({});var n=e._options&&e._options.style||{};if("function"==typeof r){var o=Te(e,r,function(r){t.setClassList(r),Se(e,t),Fe(t,n,r)},t),a=o.value;t.setClassList(a),Fe(t,n,a)}else t.setClassList(r),Fe(t,n,r)}}function ke(e,t,r){"function"==typeof r?Ne(e,t,"styles",r):Ne(e,t,"style",r)}function Se(e,t){var r=e._options&&e._options.style||{},n=e._css.selector;if(0!==n.hashList.length&&t.nodeType===ss.nodeType.Element){var o={};t.id&&n.typeList.idList&&Oe(t,n.typeList.idList,o,r),t.classList.length>0&&n.typeList.classList&&Oe(t,n.typeList.classList,o,r),n.typeList.tagList&&Oe(t,n.typeList.tagList,o,r),t.setCompoundStyle(o)}}function Oe(e,t,r,n){for(var o=0;o<t.length;o++){var a=t[o];if(e.depth>=a.score.depth&&te(a.meta.ruleDef,e)){r[a.name]=Object.assign({},a),r[a.name].style=Object.assign({},r[a.name].style);var i=r[a.name].style;if(i.animationName){var l=Le(i.animationName,n);l&&(i.animationKeyframes=l)}}}}function Le(e,t){var r=t["@KEYFRAMES"];if(r){var n=r[e];if(n)return JSON.stringify(n)}return null}function Ce(e,t,r,n){t.addEvent(r,T(n,e))}function xe(e,t,r){if(r)for(var n=Object.keys(r),o=n.length;o--;){var a=n[o],i=r[a];"string"==typeof i&&((i=e[i])||console.warn('### App Framework ### 没有找到回调事件 "'+a+'".')),"function"==typeof i?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 绑定回调事件---- "+a),Ce(e,t,a,i)):console.warn('### App Framework ### 回调事件 "'+a+'" 必须是函数')}}function Ne(e,t,r,n){if(n){if("function"==typeof n)return void je(e,t,r,n);for(var o=e._options&&e._options.style||{},a=Object.keys(n),i=a.length;i--;){var l=a[i],s=n[l];if("function"==typeof s)Ie(e,t,r,l,s);else if(t[Xs[r]](l,s),"style"===r&&"animationName"===l){var c=Le(s,o);c&&t.setStyle("animationKeyframes",c)}}}}function Ie(e,t,r,n,o){var a=Xs[r],i=e._options&&e._options.style||{},l=Te(e,o,function(o){function l(){if(t[a](n,o),"style"===r&&"animationName"===n){var e=Le(o,i);e&&t.setStyle("animationKeyframes",e)}}var s=e&&e._page&&e._page.differ;s?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 数据绑定----"+n),s.append("element",t.depth,t.ref,l)):l()},t),s=l.value;if(t[a](n,s),"style"===r&&"animationName"===n){var c=Le(s,i);c&&t.setStyle("animationKeyframes",c)}}function je(e,t,r,n){var o=Xs[r],a=Te(e,n,function(n){function a(){t[o](n)}var i=e&&e._page&&e._page.differ;i?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 数据绑定----"+r),i.append("element",t.depth,t.ref,a)):a()},t),i=a.value;t[o](i)}function Te(e,t,r,n){var o=new Zs(e,t,function(e,t){"object"!=typeof e&&e===t||r(e)});return Pe(n,o),o}function Pe(e,t){e&&(e.bindWatcherList=e.bindWatcherList||[],e.bindWatcherList.push(t))}function $e(e,t){void 0===t&&(t=!1);for(var r=e.children.slice(),n=0,o=r.length;n<o;n++){$e(r[n],!1)}if(!t){if(e.bindWatcherList){for(var a=e.bindWatcherList.slice(),i=0,l=a.length;i<l;i++){e.bindWatcherList[i].close()}delete e.bindWatcherList}if(e._vm&&e._vm._parentWatchers){for(var s=0,c=e._vm._parentWatchers.length;s<c;s++){e._vm._parentWatchers[s].close()}e._vm._parentWatchers=[]}}}function Re(e,t){return e._page.doc.createBody(t)}function De(e,t){return e._page.doc.createElement(t)}function Be(e,t){var r=e._page.doc,n=r.createFragment();return t.appendChild(n),n}function We(e,t,r){if(r)return r.moveChild(e,t)}function Me(e,t){void 0===t&&(t=!1);var r=e.parentNode;r&&r.removeChild(e,t),e._vm&&e._vm.$emit("xlc:onDestroy")}function Je(e){return e=e.replace(/&forall;/g,"∀"),e=e.replace(/&part;/g,"∂"),e=e.replace(/&exists;/g,"∃"),e=e.replace(/&empty;/g,"∅"),e=e.replace(/&nabla;/g,"∇"),e=e.replace(/&isin;/g,"∈"),e=e.replace(/&notin;/g,"∉"),e=e.replace(/&ni;/g,"∋"),e=e.replace(/&prod;/g,"∏"),e=e.replace(/&sum;/g,"∑"),e=e.replace(/&minus;/g,"−"),e=e.replace(/&lowast;/g,"∗"),e=e.replace(/&radic;/g,"√"),e=e.replace(/&prop;/g,"∝"),e=e.replace(/&infin;/g,"∞"),e=e.replace(/&ang;/g,"∠"),e=e.replace(/&and;/g,"∧"),e=e.replace(/&or;/g,"∨"),e=e.replace(/&cap;/g,"∩"),e=e.replace(/&cap;/g,"∪"),e=e.replace(/&int;/g,"∫"),e=e.replace(/&there4;/g,"∴"),e=e.replace(/&sim;/g,"∼"),e=e.replace(/&cong;/g,"≅"),e=e.replace(/&asymp;/g,"≈"),e=e.replace(/&ne;/g,"≠"),e=e.replace(/&le;/g,"≤"),e=e.replace(/&ge;/g,"≥"),e=e.replace(/&sub;/g,"⊂"),e=e.replace(/&sup;/g,"⊃"),e=e.replace(/&nsub;/g,"⊄"),e=e.replace(/&sube;/g,"⊆"),e=e.replace(/&supe;/g,"⊇"),e=e.replace(/&oplus;/g,"⊕"),e=e.replace(/&otimes;/g,"⊗"),e=e.replace(/&perp;/g,"⊥"),e=e.replace(/&sdot;/g,"⋅")}function ze(e){return e=e.replace(/&Alpha;/g,"Α"),e=e.replace(/&Beta;/g,"Β"),e=e.replace(/&Gamma;/g,"Γ"),e=e.replace(/&Delta;/g,"Δ"),e=e.replace(/&Epsilon;/g,"Ε"),e=e.replace(/&Zeta;/g,"Ζ"),e=e.replace(/&Eta;/g,"Η"),e=e.replace(/&Theta;/g,"Θ"),e=e.replace(/&Iota;/g,"Ι"),e=e.replace(/&Kappa;/g,"Κ"),e=e.replace(/&Lambda;/g,"Λ"),e=e.replace(/&Mu;/g,"Μ"),e=e.replace(/&Nu;/g,"Ν"),e=e.replace(/&Xi;/g,"Ν"),e=e.replace(/&Omicron;/g,"Ο"),e=e.replace(/&Pi;/g,"Π"),e=e.replace(/&Rho;/g,"Ρ"),e=e.replace(/&Sigma;/g,"Σ"),e=e.replace(/&Tau;/g,"Τ"),e=e.replace(/&Upsilon;/g,"Υ"),e=e.replace(/&Phi;/g,"Φ"),e=e.replace(/&Chi;/g,"Χ"),e=e.replace(/&Psi;/g,"Ψ"),e=e.replace(/&Omega;/g,"Ω"),e=e.replace(/&alpha;/g,"α"),e=e.replace(/&beta;/g,"β"),e=e.replace(/&gamma;/g,"γ"),e=e.replace(/&delta;/g,"δ"),e=e.replace(/&epsilon;/g,"ε"),e=e.replace(/&zeta;/g,"ζ"),e=e.replace(/&eta;/g,"η"),e=e.replace(/&theta;/g,"θ"),e=e.replace(/&iota;/g,"ι"),e=e.replace(/&kappa;/g,"κ"),e=e.replace(/&lambda;/g,"λ"),e=e.replace(/&mu;/g,"μ"),e=e.replace(/&nu;/g,"ν"),e=e.replace(/&xi;/g,"ξ"),e=e.replace(/&omicron;/g,"ο"),e=e.replace(/&pi;/g,"π"),e=e.replace(/&rho;/g,"ρ"),e=e.replace(/&sigmaf;/g,"ς"),e=e.replace(/&sigma;/g,"σ"),e=e.replace(/&tau;/g,"τ"),e=e.replace(/&upsilon;/g,"υ"),e=e.replace(/&phi;/g,"φ"),e=e.replace(/&chi;/g,"χ"),e=e.replace(/&psi;/g,"ψ"),e=e.replace(/&omega;/g,"ω"),e=e.replace(/&thetasym;/g,"ϑ"),e=e.replace(/&upsih;/g,"ϒ"),e=e.replace(/&piv;/g,"ϖ"),e=e.replace(/&middot;/g,"·")}function qe(e){return e=e.replace(/&nbsp;/g," "),e=e.replace(/&quot;/g,"'"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">")}function Ve(e){return e=e.replace(/&OElig;/g,"Œ"),e=e.replace(/&oelig;/g,"œ"),e=e.replace(/&Scaron;/g,"Š"),e=e.replace(/&scaron;/g,"š"),e=e.replace(/&Yuml;/g,"Ÿ"),e=e.replace(/&fnof;/g,"ƒ"),e=e.replace(/&circ;/g,"ˆ"),e=e.replace(/&tilde;/g,"˜"),e=e.replace(/&ensp;/g,""),e=e.replace(/&emsp;/g,""),e=e.replace(/&thinsp;/g,""),e=e.replace(/&zwnj;/g,""),e=e.replace(/&zwj;/g,""),e=e.replace(/&lrm;/g,""),e=e.replace(/&rlm;/g,""),e=e.replace(/&ndash;/g,"–"),e=e.replace(/&mdash;/g,"—"),e=e.replace(/&lsquo;/g,"‘"),e=e.replace(/&rsquo;/g,"’"),e=e.replace(/&sbquo;/g,"‚"),e=e.replace(/&ldquo;/g,"“"),e=e.replace(/&rdquo;/g,"”"),e=e.replace(/&bdquo;/g,"„"),e=e.replace(/&dagger;/g,"†"),e=e.replace(/&Dagger;/g,"‡"),e=e.replace(/&bull;/g,"•"),e=e.replace(/&hellip;/g,"…"),e=e.replace(/&permil;/g,"‰"),e=e.replace(/&prime;/g,"′"),e=e.replace(/&Prime;/g,"″"),e=e.replace(/&lsaquo;/g,"‹"),e=e.replace(/&rsaquo;/g,"›"),e=e.replace(/&oline;/g,"‾"),e=e.replace(/&euro;/g,"€"),e=e.replace(/&trade;/g,"™"),e=e.replace(/&larr;/g,"←"),e=e.replace(/&uarr;/g,"↑"),e=e.replace(/&rarr;/g,"→"),e=e.replace(/&darr;/g,"↓"),e=e.replace(/&harr;/g,"↔"),e=e.replace(/&crarr;/g,"↵"),e=e.replace(/&lceil;/g,"⌈"),e=e.replace(/&rceil;/g,"⌉"),e=e.replace(/&lfloor;/g,"⌊"),e=e.replace(/&rfloor;/g,"⌋"),e=e.replace(/&loz;/g,"◊"),e=e.replace(/&spades;/g,"♠"),e=e.replace(/&clubs;/g,"♣"),e=e.replace(/&hearts;/g,"♥"),e=e.replace(/&diams;/g,"♦"),e=e.replace(/&#8203;/g,"")}function Ge(e){return e=e.replace(/\r\n/g,""),e=e.replace(/\n/g,"")}function Ue(e){return e=Je(e),e=ze(e),e=qe(e),e=Ve(e),e=Ge(e)}function He(e){for(var t={},r=e.split(","),n=0;n<r.length;n++)t[r[n]]=!0;return t}function Ze(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function Ke(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function Xe(e,t){var r=[];if(t)switch(e.forEach(function(e,t){r[t]={},r[t].n=e}),t.length){case 1:e.forEach(function(e,n){r[n].v=t[0]});break;case 2:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[0]});break;case 3:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[n]});break;default:e.forEach(function(e,n){r[n].v=t[n]})}return r}function Ye(e){return"number"==typeof e||"string"==typeof e}function Qe(e,t){function r(e,r,o,a){if(r=r.toLowerCase(),rc[r])for(;l.last()&&nc[l.last()];)n("",l.last());if(oc[r]&&l.last()===r&&n("",r),a=tc[r]||!!a,a||l.push(r),t.start){var i=[];o.replace(ec,function(e,t){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:ac[t]?t:"";i.push({name:t,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),t.start&&t.start(r,i,a)}}function n(e,r){var n=0;if(r)for(r=r.toLowerCase(),n=l.length-1;n>=0&&l[n]!==r;n--);if(n>=0){for(var o=l.length-1;o>=n;o--)t.end&&t.end(l[o]);l.length=n}}var o,a,i,l=[],s=e;for(l.last=function(){return this[this.length-1]};e;){if(a=!0,l.last()&&ic[l.last()])e=e.replace(new RegExp("([\\s\\S]*?)(</"+l.last()+"[^>]*>)","i"),function(e,r){return r=r.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1"),t.text&&t.text(r),""}),n("",l.last());else if(0===e.indexOf("\x3c!--")?(o=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,o)),e=e.substring(o+3),a=!1):0===e.indexOf("</")?(i=e.match(Qs))&&(e=e.substring(i[0].length),i[0].replace(Qs,n),a=!1):0===e.indexOf("<")&&(i=e.match(Ys))&&(e=e.substring(i[0].length),i[0].replace(Ys,r),a=!1),a){o=e.indexOf("<");for(var c="";0===o;)c+="<",e=e.substring(1),o=e.indexOf("<");c+=o<0?e:e.substring(0,o),e=o<0?"":e.substring(o),t.text&&t.text(c)}e===s&&console.error("### App Parser ### 解析错误: "+e),s=e}n()}function et(e){return bc.enum.bind(null,e)}function tt(e,t){return bc[e].bind(null,t)}function rt(e,t){var r,n,o=Ec[e];return"function"==typeof o?(r="function"!=typeof t?o(t):{value:t},r.reason&&(n={reason:r.reason(e,t,r.value)})):(r={value:t},n={reason:"ERROR: 样式名 `"+Ke(e)+"` 不支持"}),{value:r.value instanceof Array?r.value:[{n:e,v:r.value}],log:n}}function nt(e,t){var r={},n=[],o=Ze(e),a=rt(o,t);return a.value.forEach(function(e){Ye(e.v)&&n.push(e)}),n&&(r.value=n),a.log&&(r.log=a.log.reason),r}function ot(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*>\n/,"").replace(/<.*!DOCTYPE.*>\n/,"")}function at(e){var t=wc[e];return void 0!==t?t:e}function it(e){var t={};return _c[e]&&(t=_c[e]),t}function lt(e){var t={};return Fc[e]&&(t=Fc[e]),t}function st(e,t){var r="html"!==t;e=ot(e),e=Ue(e);var n=[],o={type:"div",children:[],events:{},classList:[],attr:{},style:{flex:1,flexDirection:"column"}};return Qe(e,{start:function(e,t,a){var i={type:r?e:at(e),children:[],events:{},classList:[],attr:r?{}:lt(e),style:r?{}:it(e)};if(0!==t.length&&(i.attr=t.reduce(function(e,t){var r=t.name,n=t.value;return"class"===r?i.classList=n.split(/\s+/):"style"===r?n.split(";").forEach(function(e){var t,r,n=e.trim().split(":");n.length>2&&(n[1]=n.slice(1).join(":"),n=n.slice(0,2)),2===n.length&&(t=n[0].trim(),r=nt(t,n[1].trim()),r.value&&r.value.forEach(function(e){Ye(e.v)&&(i.style[e.n]=e.v)}),r.log&&console.warn("### App Parser ###",r.log))}):"id"===r?i.id=n:(n.match(/ /)&&(n=n.split(" ")),e[r]?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n),e},{})),r||"source"!==i.type||(o.source=i.attr.src),a){var l=n[0]||o;void 0===l.children&&(l.children=[]),l.children.push(i)}else n.unshift(i)},end:function(e){var t=r?e:at(e),a=n.shift();if(a.type!==t&&console.error("### App Parser ### 结束标签不匹配:",e),!r&&"video"===a.type&&o.source&&(a.attr.src=o.source,delete o.source),0===n.length)o.children.push(a);else{var i=n[0];void 0===i.children&&(i.children=[]),i.children.push(a)}},text:function(e){if(""!==e.slice().replace(/\s*/,"")){var t=n[0];if(t)if("text"===t.type){var r={type:"span",children:[],events:{},classList:[],attr:{value:e},style:{}};void 0===t.children&&(t.children=[]),t.children.push(r)}else t.attr.value=e}},comment:function(e){}}),global.Env&&"trace"===global.Env.logLevel&&console.trace("'### App Parser ### 解析"+t+"文本成功："+JSON.stringify(o)),o}function ct(e,t){return e=e.trim(),""===e&&(e="<div></div>"),Ac.compile(e,t)}function ut(e){pt(e,(e._options||{}).template||{},e._parentElement),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm ("+e._type+") UI准备就绪"),e.$emit("xlc:onReady"),e._ready=!0}function pt(e,t,r,n){if(-1!==(e._page||{}).lastSignal){if(t.id&&(t.attr.id=t.attr.id||t.id),n=n||{},dt(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 fragment 节点 ----",JSON.stringify(t)),void wt(e,t,r,n);if(gt(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 slot 节点----",JSON.stringify(t)),void bt(e,t,r);if(ft(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ----",JSON.stringify(t)),void Et(e,t,r,n);if(ht(t,n))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 for 节点----",JSON.stringify(t)),void("document"===r.type?global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 根节点不支持 `for` 指令!"):_t(e,t,r));if(vt(t,n))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 If 节点----",JSON.stringify(t)),void("document"===r.type?global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 根节点不支持 'if' 指令!"):Ft(e,t,r,n));var o=n.type||t.type,a=yt(e,o);if(a)return void At(e,a,t,r,o,n);kt(e,t,r,o)}}function ft(e){return"block"===e.type}function dt(e){return Array.isArray(e)}function ht(e,t){return!t.hasOwnProperty("repeat")&&e.repeat}function vt(e,t){return!t.hasOwnProperty("shown")&&e.shown}function gt(e){return"slot"===e.type}function mt(e){return"richtext"===e.type}function yt(e,t){var r;return e._page&&e._page.app&&e._page.app.customComponentMap&&(r=Vt(e._page.app,e._page,t)),r}function bt(e,t,r){var n=Be(e,r);if(t.attr&&t.attr.content){var o=t.attr.content,a=null;"string"==typeof o?"function"!=typeof(a=e[o])&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### slot的 content属性 "+o+" 有误， 找不到对应的render函数 "),a=null):"function"==typeof o?a=o:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### slot的 content属性 "+o+" 无效"),a&&(t.children=[],t.__render=a,xt(e,t,n))}else e._slot=n}function Et(e,t,r,n){return n=n||{},ht(t,n)?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ---- for"),void _t(e,t,r)):vt(t,n)?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ---- if"),void Ft(e,t,r,n)):void St(e,t,Be(e,r))}function wt(e,t,r,n){var o=Be(e,r);t.forEach(function(t){pt(e,t,o,n)})}function _t(e,t,r){var n=t.repeat,o=n.exp||n;"function"!=typeof o&&(o=function(){return[]});var a=n.key||"$idx",i=n.value||"$item",l=t.attr&&t.attr.tid,s=Be(e,r);s.data=[],s.vms=[],Ot(e,t,s,{getter:o,key:a,value:i,tid:l})}function Ft(e,t,r,n){var o={shown:!0},a=Be(e,r);n.repeat&&(o.repeat=n.repeat),Lt(e,t,a,o)}function At(e,t,r,n,o,a){var i=e.constructor;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译自定义组件 "+o+" ----",JSON.stringify(r));var l=new i(o,t,e,n,void 0,{"xlc:onCreate":function(){e._static&&(this._static=e._static),me(e,null,r.attr.id,this),this._externalBinding={parent:e,template:r},ue(e,this,r,a.repeat)},"xlc:onInit":function(){},"xlc:onReady":function(){
this._slot&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 向自定义组件 "+o+" 的slot插入子节点 ----"),St(e,r,this._slot))}});pe(e,l,r,n)}function kt(e,t,r,n){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译原生组件----",JSON.stringify(t)),le(t);var o;if(r.ref===ss.documentId?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译Body组件 "+n),o=Re(e,n)):(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译原生组件 "+n),o=De(e,n)),!e._rootElement){e._rootElement=o;var a=e._externalBinding||{},i=a.template,l=a.parent;if(i&&i.events&&l&&o)for(var s in i.events){var c=l[i.events[s]];c&&o.addEvent(s,T(c,l))}}mt(t)&&(t.content=t.attr.value,t.contentType=t.attr.type),se(e,o,t),t.attr&&t.attr.append&&(t.append=t.attr.append);var u="tree"===t.append,p=e._page||{};-1===p.lastSignal||u||(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译单个节点----",o),p.lastSignal=r.appendChild(o,ce.bind(null,e,o,t))),-1!==p.lastSignal&&(mt(t)?Nt(e,t,o):St(e,t,o)),-1!==p.lastSignal&&u&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译整个树----",o),p.lastSignal=r.appendChild(o,ce.bind(null,e,o,t)))}function St(e,t,r){var n=e._page||{},o=t.children;o&&o.length&&o.every(function(t){return pt(e,t,r),-1!==n.lastSignal})}function Ot(e,t,r,n){function o(e,n,o){var i={};i[u]=n,i[p]=e;var l=jt(o,i);a.push(l),pt(l,t,r,{repeat:e})}var a=r.vms,i=r.children,l=r.layoutChildren,s=n.getter,c=n.tid,u=n.key,p=n.value,f=It(e,r,s,"for",function(t){if(r&&t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### For 节点被改变----",t);var n=i.slice(),s=a.slice(),f=r.data.slice(),d={},h={};t.forEach(function(e,t){var r="@"+(c?e[c]:t);if(null==r||"@"===r)return void console.error("### App Framework ### for 循环数据的tid 属性不存在或为空");d[r]||(d[r]=[]),d[r].push(e),d[r].length>1&&console.warn("### App Framework ### for 循环数据的tid 属性 '"+r+" 不唯一, 可能导致性能问题")});var v=[];f.forEach(function(e,t){var r="@"+(c?e[c]:t),o=d[r];o&&o.length>0?(h[r]||(h[r]=[]),h[r].push({item:e,index:t,key:r,target:n[t],vm:s[t]}),v.push(e)):Pt(n[t])}),i.length=0,l.length=0,a.length=0,r.data=t.slice(),t.forEach(function(t,n){var l="@"+(c?t[c]:n),s=h[l];if("object"==typeof s&&s.length>0){var f=s.shift();f.item===v[0]?v.shift():v.$remove(f.item),i.push(f.target),We(f.target,n,r),a.push(f.vm),f.vm[p]=t,f.vm[u]=n}else o(t,n,e)})}});f&&f.length>0?(r.data=f.slice(0),f.forEach(function(t,r){o(t,r,e)})):r.data=[]}function Lt(e,t,r,n){var o=It(e,r,t.shown,"if",function(o){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### If 节点 ("+r.ref+")状态改变----",o),r&&!!r.display!=!!o&&(r.display=!!o,o?pt(e,t,r,n):Pt(r,!0))});r.display=!!o,o&&pt(e,t,r,n)}function Ct(e,t,r){r?(Pt(t,!0),pt(e,r,t)):Pt(t,!0)}function xt(e,t,r){var n=It(e,r,t.__render,"render",function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Slot 节点 ("+r.ref+")内容更新 ----"),Ct(e,r,t),r.content=t});r.content=n,n&&pt(e,n,r)}function Nt(e,t,r){var n,o=t.contentType,a=Be(e,r);if((n="function"==typeof t.content?It(e,a,t.content,"html",function(t){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Html 节点 ("+a.ref+")数据改变----",t),Pt(a,!0),t&&"html"!==o){var r=ct(t,o);pt(e,r,a)}}):t.content)&&"html"!==o){var i=ct(n,o);pt(e,i,a)}}function It(e,t,r,n,o){var a=e&&e._page&&e._page.differ,i=t.depth||1,l={};return Te(e,r,function(r){l.latestValue=r,a&&!l.recorded&&(l.recorded=!0,a.append(n,i,t.ref,function(){var t=l.latestValue;e.$valid?o(t):console.error("### App Framework ### 试图更新已销毁页面"),l.recorded=!1,l.latestValue=void 0}))},t).value}function jt(e,t){var r=Object.create(e);return r._data=t,Tt(r),r._realParent=e,e._static&&(r._static=e._static),r}function Tt(e){e._watchers=[];var t=e._data;D(t)||(t={});for(var r=Object.keys(t),n=["$idx","$item","$evt"],o=r.length;o--;)!function(){var t=r[o];n.indexOf(t)>-1||!B(t)?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(r){e._data[t]=r}}):console.error("### App Framework ### 页面数据属性名 '"+t+"' 非法, 属性名不能以$或_开头")}();Us.$ob(t,e);var a=e._methods;if(a)for(var i in a)e[i]=a[i]}function Pt(e,t){void 0===t&&(t=!1),$e(e,t),Me(e,t)}function $t(e){e._watchers=[];var t=e._data;D(t)||(t={});for(var r=Object.keys(t),n=r.length;n--;){var o=r[n];V(o)&&console.warn("### App Framework ### data 属性 '"+o+"' 是保留字, 可能会导致应用运行异常"),j(e._props,o)?console.warn("### App Framework ### data 请在data中使用另一个名称声明："+o+"，不要与props重复"):P(e,"_data",r[n])}Us.$ob(t,e);var a=e._methods;if(a)for(var i in a)e[i]=a[i]}function Rt(e,t){var r=e._options||{},n=r.events||{};for(var o in n)e.$on(o,n[o]);for(var a in t)e.$on(a,t[a]);gs.reserveEvents.forEach(function(t){e.$on("xlc:"+t,r[t])})}function Dt(e){var t=Object.keys(e||{}),r=[],n={};for(var o in e)if(e[o]._meta){var a=Object.assign({},e[o]),i=a._meta;r[o]=k({name:o,meta:i,order:void 0!==i.order?i.order:t.indexOf(o),style:a,score:null}),r.push(o),delete a._meta;var l=S(r[o].meta.ruleDef),s=l[l.length-1];r[o].score=r[o].meta.score||O(l),"tag"===s.type?(n.tagList=n.tagList||[],n.tagList.push(r[o])):"attribute"===s.type&&"id"===s.name?(n.idList=n.idList||[],n.idList.push(r[o])):"attribute"===s.type&&"class"===s.name?(n.classList=n.classList||[],n.classList.push(r[o])):console.warn("无法识别的CSS选择器："+o)}return{hashList:r,typeList:n}}function Bt(e,t,r){var n=e,o={};return{setTimeout:function(e,a){var i=r(e,n),l=function(){t(n,i)},s=global.setTimeoutWrap(n.id,l,a||0);return o[s.toString()]=i,s.toString()},setInterval:function(e,a){var i=r(e,n),l=function(){t(n,i,null,!0)},s=global.setIntervalWrap(n.id,l,a||0);return o[s.toString()]=i,s.toString()},clearTimeout:function(e){global.clearTimeoutWrap(e),o[e]=void 0},clearInterval:function(e){global.clearIntervalWrap(e),o[e]=void 0},requestAnimationFrame:function(e){var a=r(e,n),i=function(){t(n,a)},l=global.requestAnimationFrameWrap(n.id,i);return o[l.toString()]=a,l.toString()},cancelAnimationFrame:function(e){global.cancelAnimationFrameWrap(e),o[e]=void 0}}}function Wt(e,t,r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始初始化页面("+e.id+")---- ",r);var n,o,a=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Cc.apply(void 0,[e].concat(t))},i=function(t,o){n=Lc(e,t,o,r),rr(e),e.doc.listener.createFinish(),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 完成实例初始化("+e.id+")----")},l=(e.doc,function(t){return zt(e.app,z(t))});"function"==typeof t?o=t:t&&(o=t.toString(),o='(function(global){"use strict"; '+o+" })(Object.create(this))"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始编译代码----");var s=global.Env;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译配置代码----",JSON.stringify(s));var c=Bt(e,tr,or);return global.$app_define$=a,global.$app_bootstrap$=i,global.$app_require$=l,global.setTimeout=c.setTimeout,global.setInterval=c.setInterval,global.clearTimeout=c.clearTimeout,global.clearInterval=c.clearInterval,global.requestAnimationFrame=c.requestAnimationFrame,global.cancelAnimationFrame=c.cancelAnimationFrame,o(),n}function Mt(e,t){void 0===t&&(t=!0);var r=[];Array.isArray(e)?r=e:r.push(e),r.forEach(function(e){var r=e.name;console.log("### App Framework ### 注册模块---- "+r+" <"+e.__type__+">");var n=xc[r];n||(n={type:e.__type__,name:e.name,methods:{}},xc[r]=n),n.methods||(n.methods={});var o=n.methods;e.methods&&e.methods.length&&e.methods.forEach(function(e){var n=e.name;n?o[n]&&!t||(o[n]=e,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册模块 "+r+" 接口---- "+n)):console.warn("### App Framework ### 模块 "+r+" 的接口没有name属性")})})}function Jt(e,t){var r=e.prototype;for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])}function zt(e,t){function r(e,t){if(e){var r=e;return t.forEach(function(e){e in r||(r[e]={}),r=r[e]}),r}}global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### require模块"+t);var n=[t];if(t.indexOf(".")<0){var o=t+".";for(var a in xc)a.startsWith(o)&&n.push(a)}var i={},l=[];if(n.forEach(function(n){var o=xc[n];if(o){var a=i,s=n.replace(t,"");"."===s.substr(0,1)&&(s=s.substr(1)),s.length>0&&(l=s.split("."),l.length>1&&(l.splice(0,1),a=r(i,l)));var c=o.methods;for(var u in c)!function(t){var r=c[t];t in a&&console.warn("### App Framework ### 模块"+n+"的接口函数"+t+"---- 重复定义"),a[t]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(e instanceof Rs&&!e.$valid)throw new Error("请确认Native方法调用["+o.name+"."+r.name+"()]发生在应用app的生命周期的创建['onCreate()']之后");return rr(e),H(e,o.name,r.name,r.mode,t,o.type)},global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### require---- 模块"+n+"接口函数"+t)}(u)}}),0===Object.keys(i).length)throw new Error("请确认引入的模块["+t+"]：名称正确并且在manifest.json的features中声明");return i}function qt(e,t,r,n){if(!e||!t)return void console.warn("### App Framework ### defineCustomComponent() app或inst不存在");var o=Ut(e,t.id);o[r]&&console.warn("### App Framework ### 组件 ("+r+") 被重复注册"),o[r]=n}function Vt(e,t,r){return e&&t?Ut(e,t.id)[r]:void console.warn("### App Framework ### requireCustomComponent() app或inst不存在")}function Gt(e,t,r){if(!e||!t)return void console.warn("### App Framework ### removeCustomComponent() app或inst不存在");var n=Ut(e,t.id);if(r)global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### removeCustomComponent() 删除id="+t.id+"上注册的自定义组件("+r+"):"+!!n[r]),delete n[r];else for(var o in n)global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### removeCustomComponent() 删除id="+t.id+"上注册的自定义组件("+o+"):"+!!n[o]),delete n[o]}function Ut(e,t){var r=e.customComponentMap;return r[t]=r[t]||{},r[t]}function Ht(e){console.log("### App Framework ### 重建页面("+e.id+")----");var t=e.vm,r=e.doc;if(!t||!r)return console.error("### App Framework ### 页面("+e.id+")缺少dom数据"),new Error("recreatePage: 无效数据");r.recreateActions(),rr(e),r.listener.createFinish()}function Zt(e,t){console.log("### App Framework ### 刷新页面("+e.id+")----");var r=e.vm;return r||console.error("### App Framework ### 页面("+e.id+")没有Vm"),r&&t?("function"==typeof r.onUpdateData?r.onUpdateData(t):x(r,t),rr(e),void e.doc.listener.refreshFinish()):r?void console.warn("### App Framework ### 页面("+e.id+")刷新数据为空"):new Error("refreshPage: 无效数据")}function Kt(e){console.log("### App Framework ### 销毁页面("+e.id+")----"),e.vm&&Xt(e.vm),Gt(e.app,e),e.intent=null,e.vm=null,e.doc.destroy(),e.doc=null,e.callbacks=null,e.differ=null,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 成功销毁页面("+e.id+")----")}function Xt(e){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 销毁VM("+e._type+")"),e.$emit("xlc:onDestroy"),e._valid=!1,e._visible=!1,delete e._page,delete e._css,delete e._props,delete e._data,delete e._ids,delete e._methods,delete e._options,delete e._parent,delete e._root,delete e._parentElement,delete e._rootElement,e._parentWatchers){for(var t=e._parentWatchers.length;t--;)e._parentWatchers[t].close();delete e._parentWatchers}if(e._watchers){for(var r=e._watchers.length;r--;)e._watchers[r].close();delete e._watchers}if(e._childrenVms){for(var n=e._childrenVms.length;n--;)Xt(e._childrenVms[n]);delete e._childrenVms}delete e._type,delete e._vmEvents}function Yt(e,t){if(e&&(e._visible=t,e._childrenVms))for(var r=e._childrenVms.length;r--;)Yt(e._childrenVms[r],t)}function Qt(e,t){void 0===t&&(t=!1);var r=e.doc||{},n=r.body||{};return n.toJSON?n.toJSON(t):{}}function er(e,t,r,n,o){if(!e.vm)return new Error("fireEvent: 只有Page才能发送Dom事件");if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 向页面("+e.id+") 的节点("+t+')发送事件 "'+r+'"---- '+o),Array.isArray(t))return void t.some(function(t){return!1!==er(e,t,r,n)});var a=e.doc.getRef(t);if(a){var i=e.doc.fireEvent(a,r,n,o);return rr(e)&&e.doc.listener.updateFinish(),i}return new Error('fireEvent: 无效element索引 "'+t+'"')}function tr(e,t,r,n){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用页面("+e.id+")的回调("+t+") 参数：",r),!e.callbacks)return new Error('invoke: 回调函数 "'+t+'" 没有注册');if(e.vm&&!e.vm.$valid)return void console.error("invoke: 回调函数所属对象("+e.id+")已经无效, 终止回调执行");var o=e.callbacks[t];if("function"==typeof o){var a=o(r);if(void 0!==n&&!1!==n||(e.callbacks[t]=void 0),e.doc){rr(e)&&e.doc.listener.updateFinish()}return a}return new Error('callback: 无效回调函数Id "'+t+'"')}function rr(e){var t=!1;if(e.doc&&e.differ&&e.doc.listener){if(e.differ.isEmpty()||e.differ.flush(),e.doc.listener.updates.length){var r=e.doc.listener.updates.splice(0);e.doc.listener.updates=[],nr(e,r)}t=e.doc.listener.hasActions()}return t}function nr(e,t){"array"!==J(t)&&(t=[t]);var r=[];t.forEach(function(t){t.args=t.args.map(function(t){return or(t,e)}),r.push(t),r.length>=50&&(Ws.sendActions(e.id,JSON.stringify(r),"-1"),r=[])}),r.length>0&&Ws.sendActions(e.id,JSON.stringify(r),"-1")}function or(e,t){switch(J(e)){case"undefined":case"null":return"";case"regexp":return e.toString();case"date":return e.toISOString();case"number":case"string":case"boolean":case"array":return e;case"object":if(e instanceof Ws.DomElement)return e.ref;var r={};for(var n in e)r[n]=or(e[n],t);return r;case"function":var o=G();return t.callbacks?t.callbacks[o]=e:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### normalize() 页面已经销毁，不再注册回调"),o.toString();default:return JSON.stringify(e)}}function ar(e,t){var r=e[t];for(var n in r)r[n]()}function ir(e,t){var r=e[t];for(var n in r){r[n].forEach(function(e){e()})}}function lr(e,t,r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始初始化App("+e.id+")----初始化数据：",r);var n,o,a=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Tc.apply(void 0,[e].concat(t))},i=function(t,o){n=jc(e,t,o,r),console.log("### App Framework ### 完成App初始化("+e.id+")----")},l=function(t){return zt(e,z(t))};"function"==typeof t?o=t:t&&(o=t.toString(),o='(function(global){"use strict"; '+o+" })(Object.create(this))"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始编译代码----");var s=global.Env;return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译配置代码----",JSON.stringify(s)),global.$app_define$=a,global.$app_bootstrap$=i,global.$app_require$=l,o(),n}function sr(e,t,r,n){var o=Pc[e];r=r||{};var a;return o?a=new Error('createApplication: 无效应用Id "'+e+'"'):(o=new Rs(e,r),Pc[e]=o,a=lr(o,t,n)),a}function cr(e){return $c[e]}function ur(e,t,r,n,o){var a=Pc[t];if(!a)return new Error('createPage: 无效应用Id "'+t+'"');Vs.resetTarget();var i,l=$c[e];return l?i=new Error('createPage: 无效页面Id "'+e+'"'):(l=new Ic(e,a,o),$c[e]=l,i=Wt(l,r,n)),i}function pr(e){"string"==typeof e&&(e=JSON.parse(e));var t=K(e.callback);if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 处理invoke回调----",JSON.stringify(t)),t){var r=$c[t.instance];if(r||(r=Pc[t.instance]),r){var n=[r,e.callback,e.data,t.preserved];return U.apply(void 0,n)}}return new Error('processInvokeCallback: 无效invoke回调Id "'+t.instance+'"')}function fr(e,t){if(!Array.isArray(t))return new Error('processCallbacks: 无效任务回调数据 "'+e+'"');var r=$c[e];if(r||(r=Pc[e]),r){var n=[];return t.forEach(function(e){var t=Rc[e.action],o=[].concat(e.args);"function"==typeof t?(o.unshift(r),n.push(t.apply(void 0,o))):(console.error("### App Framework ### 无法识别的回调函数类型 ("+e.action+")"),n.push("invalid"))}),n}return new Error('processCallbacks: 无效回调来源Id "'+e+'"')}function dr(e){"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)||(e=[e]),e.forEach(function(e){e&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册组件---- ",JSON.stringify(e)),"string"==typeof e?Dc[e]={type:e}:"object"==typeof e&&"string"==typeof e.type&&(Dc[e.type]=e))})}function hr(e,t){void 0===t&&(t="feature"),"string"==typeof e&&(e=JSON.parse(e)),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### registerModules---- ",JSON.stringify(e)),"object"==typeof(e=e.map(function(e){return e.__type__=t,e}))&&Mt(e)}function vr(e){"string"==typeof e&&(e=JSON.parse(e)),"object"==typeof e&&Jt(Sc,e)}function gr(e){var t=$c[e];return t?Qt(t):new Error('getPageRoot: 无效页面Id "'+e+'"')}function mr(e){var t=Pc[e];return t?t.$def:new Error('getAppConfig: 无效应用Id "'+e+'"')}function yr(e){Ws.DomDocument=e.DomDocument,Ws.DomElement=e.DomElement,Ws.DomFragment=e.DomFragment,Ws.DomComment=e.DomComment,Ws.sendActions=e.sendActions,Ws.DomListener=e.DomListener}function br(e){var t=$c[e];return t?Ht(t):new Error('recreatePage: 无效页面Id "'+e+'"')}function Er(e,t){var r,n=$c[e];return n?(r=Zt(n,t),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### refreshPage ("+e+")---- ")):r=new Error('refreshPage: 无效页面Id "'+e+'"'),r}function wr(e,t){var r=$c[e];r?r.vm?(Yt(r.vm,t),r.vm.$emit(t?"xlc:onShow":"xlc:onHide"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### changeVisiblePage ("+e+")---- "+t+" ")):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### changeVisiblePage 页面("+e+")创建失败, 无法响应事件---- "):console.error("### App Framework ### changeVisiblePage ----无效页面id "+e+" ")}function _r(e){var t=$c[e],r=!1;return t?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### backPressOnPage ("+e+")---- ",t.vm._ready),t.vm&&t.vm._ready?r=t.vm.$emit("xlc:onBackPress"):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### backPressOnPage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### backPressOnPage ----无效页面id "+e+" "),!0!==r&&(r=!1),r}function Fr(e){var t=$c[e];t?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### menuPressOnPage ("+e+")---- ",t.vm._ready),t.vm&&t.vm._ready?t.vm.$emit("xlc:onMenuPress"):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### menuPressOnPage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### menuPressOnPage ----无效页面id "+e+" ")}function Ar(e,t){var r=$c[e];r?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### orientationChangePage ("+e+")---- ",r.vm._ready),r.vm&&r.vm._ready?r.vm.$emit("xlc:onOrientationChange",t):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### orientationChangePage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### orientationChangePage ----无效页面id "+e+" ")}function kr(e){Vs.resetTarget();var t=$c[e];return t?(Kt(t),delete $c[e],$c):new Error('destroyPage: 无效页面Id "'+e+'"')}function Sr(e){var t=Pc[e];return t?(X(t),delete Pc[e],Pc):new Error('destroyApplication: 无效应用Id "'+e+'"')}function Or(e,t){return void 0===t&&(t=[]),{module:"dom",method:e,args:t}}function Lr(e){Uc[e]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];for(var n in Jc){var o=Jc[n];o&&o[e]&&o[e].apply(o,t)}}}function Cr(e){Uc[e]="createApplication"===e?function(t,r,n,o){var a=Vc[t];return a?new Error("Runtime "+e+':无效应用id "'+t+'"'):(a={framework:"XApp",created:Date.now()},Vc[t]=a,n=JSON.parse(JSON.stringify(n||{})),n.env=JSON.parse(JSON.stringify(global.Env||{})),console.log("### App Framework ### 创建应用 "+t+"---- 框架: "+a.framework+" 版本: "+global.frameworkVersion),Jc[a.framework].createApplication(t,r,n,o))}:"destroyApplication"===e?function(t){var r=Vc[t];if(r&&Jc[r.framework]){var n=Jc[r.framework].destroyApplication(t);return delete Vc[t],n}return new Error("Runtime "+e+':无效应用Id:  "'+t+'"')}:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=t[0],o=Vc[n];return o&&Jc[o.framework]?(a=Jc[o.framework])[e].apply(a,t):new Error("Runtime "+e+':无效应用Id:  "'+n+'"');var a}}function xr(e){var t,r;"string"==typeof e?t=e:e.length&&e.length>1&&(t=e[0],r=e[1]),"createPage"===t?Uc[t]=function(e,r,n,o,a){var i=Vc[r];if(!i)return new Error("Runtime "+t+':无效应用id "'+r+'"');var l=Gc[e];return l?new Error("Runtime "+t+':无效页面id "'+e+'"'):(l={appId:r,created:Date.now()},Gc[e]=l,console.log("### App Framework ### 创建页面 "+e+"----应用Id: "+r),Jc[i.framework].createPage(e,r,n,o,a))}:"processInvokeCallback"===t?(Uc[t]=function(e){var r=Jc.XApp;return r?r[t](e):new Error("Runtime "+t+": App 框架没有找到函数定义")},r&&(Uc[r]=function(e){var r=Jc.XApp;return r?r[t](e):new Error("Runtime "+t+": App 框架没有找到函数定义")})):(Uc[t]=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var o=r[0],a=Gc[o];if(a){var i=Vc[a.appId];if(i&&Jc[i.framework]){var l=(s=Jc[i.framework])[t].apply(s,r);return"destroyPage"===e&&delete Gc[o],l}return new Error("Runtime "+t+':无效应用Id:  "'+a.appId+'"')}return"backPressPage"===e?(console.error('### App Framework ### backPressPage 无效页面Id:  "'+o+'"'),!1):new Error("Runtime "+t+':无效页面Id:  "'+o+'"');var s},r&&(Uc[r]=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=e[0],o=Gc[n];if(o){var a=Vc[o.appId];return a&&Jc[a.framework]?(i=Jc[a.framework])[t].apply(i,e):new Error("Runtime "+t+':无效页面Id: "'+n+'"')}var i}))}function Nr(e){Jc=e.frameworks||{};for(var t in Jc){console.log("### App Framework ### 初始化框架 "+t);Jc[t].init(e)}return Hc.forEach(Lr),Zc.forEach(Cr),Kc.forEach(xr),Uc}function Ir(){Object.freeze(hs),Object.freeze(vs),Object.freeze(cs),Object.freeze(Wc),Object.freeze(Mc.prototype),Object.freeze(hs.prototype),Object.freeze(vs.prototype),Object.freeze(cs.prototype),Object.freeze(Wc.prototype),as.setNativeConsole(),as.setNativeTimer(),as.setNativeRouter()}function jr(e,t){var r=t;if(r&&r.type){var n=Ws.nativeComponentMap[r.type];n&&n.methods&&n.methods.forEach(function(t){r[t]=function(){for(var o=[],a=arguments.length;a--;)o[a]=arguments[a];rr(e);var i={component:n.type,ref:r.ref,method:t,args:o};global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### invokeComponentMethod---- ",JSON.stringify(i)),nr(e,i)}})}return r}function Tr(e){if(void 0===e)return"function"==typeof this.$rootElement&&this.$rootElement();var t=this._ids[e];return t?jr(t.vm._page||{},t.element):void 0}function Pr(){if(this._rootElement)return jr(this._page||{},this._rootElement)}function $r(e){var t=this._ids[e];if(t)return t.vm}function Rr(e){var t=this._ids[e];if(t)return t.vm}function Dr(e,t){var r=this._page,n=r.differ;"function"==typeof e&&n.before(function(){e()}),"function"==typeof t&&n.after(function(){t()})}function Br(){return this._page.app.options}function Wr(e){switch(J(e)){case"undefined":case"null":return"";case"number":case"boolean":case"function":case"regexp":return e.toString();case"date":return e.toISOString();case"string":return e;default:return JSON.stringify(e)}}function Mr(e,t,r){function n(e,t){return{type:"text"===e?"span":"text",attr:{value:Wr(t)}}}function o(t,r){t.forEach(function(t){Es(t)?o(t,r):"span"===e||"a"===e?r.attr.value=t:r.children.push(a(t)?t:n(e,t))})}function a(e){return"object"===J(e)&&e.__jsx__}var i={__jsx__:!0,type:e,attr:{},events:{},style:{},classList:[],children:[]};return t&&Object.keys(t).forEach(function(e){var r=t[e];if("style"===e)r.split(";").forEach(function(e){var t,r,n=e.trim().split(":");n.length>2&&(n[1]=n.slice(1).join(":"),n=n.slice(0,2)),2===n.length&&(t=n[0].trim(),r=nt(t,n[1].trim()),r.value&&r.value.forEach(function(e){i.style[e.n]=e.v}),r.log&&console.error("### App Parser ###",r.log))});else if("class"===e)i.classList=r.split(/\s+/);else if("id"===e)i.id=r;else if(e.match(/^(on|@)/)){var n=e.replace(/^(on|@)/,"");n&&(i.events[n]=r)}else i.attr[e]=r}),r&&r.length&&r.forEach(function(t){Es(t)?o(t,i):null!=t&&("span"===e||"a"===e?i.attr.value=Wr(t):i.children.push(a(t)?t:n(e,t)))}),i}var Jr={framework:"0.0.6",packager:"0.0.5"};Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,o=function(e){var t=r(e);return Math.min(Math.max(t,0),n)};return function(e){var r=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var l,s=o(n.length),c=t(r)?Object(new r(s)):new Array(s),u=0;u<s;)l=n[u],c[u]=i?void 0===a?i(l,u):i.call(a,l,u):l,u+=1;return c.length=s,c}}());var zr=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),qr=e(function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)}),Vr=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Gr=Vr,Ur=function(e){if(!Gr(e))throw TypeError(e+" is not an object!");return e},Hr=function(e){try{return!!e()}catch(e){return!0}},Zr=!Hr(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Kr=Vr,Xr=zr.document,Yr=Kr(Xr)&&Kr(Xr.createElement),Qr=function(e){return Yr?Xr.createElement(e):{}},en=!Zr&&!Hr(function(){return 7!=Object.defineProperty(Qr("div"),"a",{get:function(){return 7}}).a}),tn=Vr,rn=function(e,t){if(!tn(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!tn(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!tn(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!tn(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},nn=Ur,on=en,an=rn,ln=Object.defineProperty,sn=Zr?Object.defineProperty:function(e,t,r){if(nn(e),t=an(t,!0),nn(r),on)try{return ln(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e},cn={f:sn},un=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},pn=cn,fn=un,dn=Zr?function(e,t,r){return pn.f(e,t,fn(1,r))}:function(e,t,r){return e[t]=r,e},hn={}.hasOwnProperty,vn=function(e,t){return hn.call(e,t)},gn=0,mn=Math.random(),yn=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++gn+mn).toString(36))},bn=e(function(e){var t=zr,r=dn,n=vn,o=yn("src"),a=Function.toString,i=(""+a).split("toString");qr.inspectSource=function(e){return a.call(e)},(e.exports=function(e,a,l,s){var c="function"==typeof l;c&&(n(l,"name")||r(l,"name",a)),e[a]!==l&&(c&&(n(l,o)||r(l,o,e[a]?""+e[a]:i.join(String(a)))),e===t?e[a]=l:s?e[a]?e[a]=l:r(e,a,l):(delete e[a],r(e,a,l)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||a.call(this)})}),En=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},wn=En,_n=function(e,t,r){if(wn(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},Fn=zr,An=qr,kn=dn,Sn=bn,On=_n,Ln=function(e,t,r){var n,o,a,i,l=e&Ln.F,s=e&Ln.G,c=e&Ln.S,u=e&Ln.P,p=e&Ln.B,f=s?Fn:c?Fn[t]||(Fn[t]={}):(Fn[t]||{}).prototype,d=s?An:An[t]||(An[t]={}),h=d.prototype||(d.prototype={});s&&(r=t);for(n in r)o=!l&&f&&void 0!==f[n],a=(o?f:r)[n],i=p&&o?On(a,Fn):u&&"function"==typeof a?On(Function.call,a):a,f&&Sn(f,n,a,e&Ln.U),d[n]!=a&&kn(d,n,i),u&&h[n]!=a&&(h[n]=a)};Fn.core=An,Ln.F=1,Ln.G=2,Ln.S=4,Ln.P=8,Ln.B=16,Ln.W=32,Ln.U=64,Ln.R=128;var Cn=Ln,xn={}.toString,Nn=function(e){return xn.call(e).slice(8,-1)},In=Nn,jn=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==In(e)?e.split(""):Object(e)},Tn=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},Pn=jn,$n=Tn,Rn=function(e){return Pn($n(e))},Dn=Math.ceil,Bn=Math.floor,Wn=function(e){return isNaN(e=+e)?0:(e>0?Bn:Dn)(e)},Mn=Wn,Jn=Math.min,zn=function(e){return e>0?Jn(Mn(e),9007199254740991):0},qn=Wn,Vn=Math.max,Gn=Math.min,Un=function(e,t){return e=qn(e),e<0?Vn(e+t,0):Gn(e,t)},Hn=Rn,Zn=zn,Kn=Un,Xn=zr,Yn=Xn["__core-js_shared__"]||(Xn["__core-js_shared__"]={}),Qn=function(e){return Yn[e]||(Yn[e]={})},eo=Qn("keys"),to=yn,ro=function(e){return eo[e]||(eo[e]=to(e))},no=vn,oo=Rn,ao=function(e){return function(t,r,n){var o,a=Hn(t),i=Zn(a.length),l=Kn(n,i);if(e&&r!=r){for(;i>l;)if((o=a[l++])!=o)return!0}else for(;i>l;l++)if((e||l in a)&&a[l]===r)return e||l||0;return!e&&-1}}(!1),io=ro("IE_PROTO"),lo=function(e,t){var r,n=oo(e),o=0,a=[];for(r in n)r!=io&&no(n,r)&&a.push(r);for(;t.length>o;)no(n,r=t[o++])&&(~ao(a,r)||a.push(r));return a},so="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),co=lo,uo=so,po=Object.keys||function(e){return co(e,uo)},fo=Object.getOwnPropertySymbols,ho={f:fo},vo={}.propertyIsEnumerable,go={f:vo},mo=Tn,yo=function(e){return Object(mo(e))},bo=po,Eo=ho,wo=go,_o=yo,Fo=jn,Ao=Object.assign,ko=!Ao||Hr(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Ao({},e)[r]||Object.keys(Ao({},t)).join("")!=n})?function(e,t){for(var r=arguments,n=_o(e),o=arguments.length,a=1,i=Eo.f,l=wo.f;o>a;)for(var s,c=Fo(r[a++]),u=i?bo(c).concat(i(c)):bo(c),p=u.length,f=0;p>f;)l.call(c,s=u[f++])&&(n[s]=c[s]);return n}:Ao,So=Cn;So(So.S+So.F,"Object",{assign:ko}),Object.setPrototypeOf||(Object.setPrototypeOf=function(e,t){function r(e,t){return n.call(e,t),e}var n;try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,n.call({},null)}catch(t){if(e.prototype!=={}.__proto__||void 0==={__proto__:null}.__proto__)return;n=function(e){this.__proto__=e},r.polyfill=r(r({},null),e.prototype)instanceof e}return r}(Object));var Oo=e(function(e){var t=Qn("wks"),r=yn,n=zr.Symbol,o="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=o&&n[e]||(o?n:r)("Symbol."+e))}).store=t}),Lo=Nn,Co=Oo("toStringTag"),xo="Arguments"==Lo(function(){return arguments}()),No=function(e,t){try{return e[t]}catch(e){}},Io=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=No(t=Object(e),Co))?r:xo?Lo(t):"Object"==(n=Lo(t))&&"function"==typeof t.callee?"Arguments":n},jo=Io,To={};To[Oo("toStringTag")]="z",To+""!="[object z]"&&bn(Object.prototype,"toString",function(){return"[object "+jo(this)+"]"},!0);var Po=Wn,$o=Tn,Ro={},Do=cn,Bo=Ur,Wo=po,Mo=Zr?Object.defineProperties:function(e,t){Bo(e);for(var r,n=Wo(t),o=n.length,a=0;o>a;)Do.f(e,r=n[a++],t[r]);return e},Jo=zr.document,zo=Jo&&Jo.documentElement,qo=Ur,Vo=Mo,Go=so,Uo=ro("IE_PROTO"),Ho=function(){},Zo=function(){var e,t=Qr("iframe"),r=Go.length;for(t.style.display="none",zo.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),Zo=e.F;r--;)delete Zo.prototype[Go[r]];return Zo()},Ko=Object.create||function(e,t){var r;return null!==e?(Ho.prototype=qo(e),r=new Ho,Ho.prototype=null,r[Uo]=e):r=Zo(),void 0===t?r:Vo(r,t)},Xo=cn.f,Yo=vn,Qo=Oo("toStringTag"),ea=function(e,t,r){e&&!Yo(e=r?e:e.prototype,Qo)&&Xo(e,Qo,{configurable:!0,value:t})},ta=Ko,ra=un,na=ea,oa={};dn(oa,Oo("iterator"),function(){return this});var aa=function(e,t,r){e.prototype=ta(oa,{next:ra(1,r)}),na(e,t+" Iterator")},ia=vn,la=yo,sa=ro("IE_PROTO"),ca=Object.prototype,ua=Object.getPrototypeOf||function(e){return e=la(e),ia(e,sa)?e[sa]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ca:null},pa=Cn,fa=bn,da=dn,ha=vn,va=Ro,ga=aa,ma=ea,ya=ua,ba=Oo("iterator"),Ea=!([].keys&&"next"in[].keys()),wa=function(){return this},_a=function(e,t,r,n,o,a,i){ga(r,t,n);var l,s,c,u=function(e){if(!Ea&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},p=t+" Iterator",f="values"==o,d=!1,h=e.prototype,v=h[ba]||h["@@iterator"]||o&&h[o],g=!Ea&&v||u(o),m=o?f?u("entries"):g:void 0,y="Array"==t?h.entries||v:v
;if(y&&(c=ya(y.call(new e)))!==Object.prototype&&c.next&&(ma(c,p,!0),ha(c,ba)||da(c,ba,wa)),f&&v&&"values"!==v.name&&(d=!0,g=function(){return v.call(this)}),(Ea||d||!h[ba])&&da(h,ba,g),va[t]=g,va[p]=wa,o)if(l={values:f?g:u("values"),keys:a?g:u("keys"),entries:m},i)for(s in l)s in h||fa(h,s,l[s]);else pa(pa.P+pa.F*(Ea||d),t,l);return l},Fa=function(e){return function(t,r){var n,o,a=String($o(t)),i=Po(r),l=a.length;return i<0||i>=l?e?"":void 0:(n=a.charCodeAt(i),n<55296||n>56319||i+1===l||(o=a.charCodeAt(i+1))<56320||o>57343?e?a.charAt(i):n:e?a.slice(i,i+2):o-56320+(n-55296<<10)+65536)}}(!0);_a(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Fa(t,r),this._i+=e.length,{value:e,done:!1})});var Aa=Vr,ka=Nn,Sa=Oo("match"),Oa=function(e){var t;return Aa(e)&&(void 0!==(t=e[Sa])?!!t:"RegExp"==ka(e))},La=Oa,Ca=Tn,xa=function(e,t,r){if(La(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(Ca(e))},Na=Oo("match"),Ia=Cn,ja=zn,Ta=xa,Pa="".endsWith;Ia(Ia.P+Ia.F*function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Na]=!1,!"/./"[e](t)}catch(e){}}return!0}("endsWith"),"String",{endsWith:function(e){var t=Ta(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=ja(t.length),o=void 0===r?n:Math.min(ja(r),n),a=String(e);return Pa?Pa.call(t,a,o):t.slice(o-a.length,o)===a}});var $a=Oo("unscopables"),Ra=Array.prototype;void 0==Ra[$a]&&dn(Ra,$a,{});var Da=function(e){Ra[$a][e]=!0},Ba=function(e,t){return{value:t,done:!!e}},Wa=Da,Ma=Ba,Ja=Ro,za=Rn,qa=_a(Array,"Array",function(e,t){this._t=za(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Ma(1)):"keys"==t?Ma(0,r):"values"==t?Ma(0,e[r]):Ma(0,[r,e[r]])},"values");Ja.Arguments=Ja.Array,Wa("keys"),Wa("values"),Wa("entries");for(var Va=qa,Ga=po,Ua=bn,Ha=zr,Za=dn,Ka=Ro,Xa=Oo,Ya=Xa("iterator"),Qa=Xa("toStringTag"),ei=Ka.Array,ti={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ri=Ga(ti),ni=0;ni<ri.length;ni++){var oi,ai=ri[ni],ii=ti[ai],li=Ha[ai],si=li&&li.prototype;if(si&&(si[Ya]||Za(si,Ya,ei),si[Qa]||Za(si,Qa,ai),Ka[ai]=ei,ii))for(oi in Va)si[oi]||Ua(si,oi,Va[oi],!0)}var ci,ui,pi,fi=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},di=Ur,hi=function(e,t,r,n){try{return n?t(di(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&di(o.call(e)),t}},vi=Ro,gi=Oo("iterator"),mi=Array.prototype,yi=function(e){return void 0!==e&&(vi.Array===e||mi[gi]===e)},bi=Io,Ei=Oo("iterator"),wi=Ro,_i=qr.getIteratorMethod=function(e){if(void 0!=e)return e[Ei]||e["@@iterator"]||wi[bi(e)]},Fi=e(function(e){var t=_n,r=hi,n=yi,o=Ur,a=zn,i=_i,l={},s={},c=e.exports=function(e,c,u,p,f){var d,h,v,g,m=f?function(){return e}:i(e),y=t(u,p,c?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(n(m)){for(d=a(e.length);d>b;b++)if((g=c?y(o(h=e[b])[0],h[1]):y(e[b]))===l||g===s)return g}else for(v=m.call(e);!(h=v.next()).done;)if((g=r(v,y,h.value,c))===l||g===s)return g};c.BREAK=l,c.RETURN=s}),Ai=Ur,ki=En,Si=Oo("species"),Oi=function(e,t){var r,n=Ai(e).constructor;return void 0===n||void 0==(r=Ai(n)[Si])?t:ki(r)},Li=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},Ci=_n,xi=Li,Ni=zo,Ii=Qr,ji=zr,Ti=ji.process,Pi=ji.setImmediate,$i=ji.clearImmediate,Ri=ji.MessageChannel,Di=ji.Dispatch,Bi=0,Wi={},Mi=function(){var e=+this;if(Wi.hasOwnProperty(e)){var t=Wi[e];delete Wi[e],t()}},Ji=function(e){Mi.call(e.data)};Pi&&$i||(Pi=function(e){for(var t=arguments,r=[],n=1;arguments.length>n;)r.push(t[n++]);return Wi[++Bi]=function(){xi("function"==typeof e?e:Function(e),r)},ci(Bi),Bi},$i=function(e){delete Wi[e]},"process"==Nn(Ti)?ci=function(e){Ti.nextTick(Ci(Mi,e,1))}:Di&&Di.now?ci=function(e){Di.now(Ci(Mi,e,1))}:Ri?(ui=new Ri,pi=ui.port2,ui.port1.onmessage=Ji,ci=Ci(pi.postMessage,pi,1)):ji.addEventListener&&"function"==typeof postMessage&&!ji.importScripts?(ci=function(e){ji.postMessage(e+"","*")},ji.addEventListener("message",Ji,!1)):ci="onreadystatechange"in Ii("script")?function(e){Ni.appendChild(Ii("script")).onreadystatechange=function(){Ni.removeChild(this),Mi.call(e)}}:function(e){setTimeout(Ci(Mi,e,1),0)});var zi={set:Pi,clear:$i},qi=zr,Vi=zi.set,Gi=qi.MutationObserver||qi.WebKitMutationObserver,Ui=qi.process,Hi=qi.Promise,Zi="process"==Nn(Ui),Ki=En,Xi=function(e){return new t(e)},Yi={f:Xi},Qi=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},el=Ur,tl=Vr,rl=Yi,nl=function(e,t){if(el(e),tl(t)&&t.constructor===e)return t;var r=rl.f(e);return(0,r.resolve)(t),r.promise},ol=bn,al=zr,il=cn,ll=Zr,sl=Oo("species"),cl=Oo("iterator"),ul=!1;try{var pl=[7][cl]();pl.return=function(){ul=!0},Array.from(pl,function(){throw 2})}catch(e){}var fl,dl,hl,vl,gl=zr,ml=_n,yl=Io,bl=Cn,El=Vr,wl=En,_l=fi,Fl=Fi,Al=Oi,kl=zi.set,Sl=function(){var e,t,r,n=function(){var n,o;for(Zi&&(n=Ui.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(Zi)r=function(){Ui.nextTick(n)};else if(!Gi||qi.navigator&&qi.navigator.standalone)if(Hi&&Hi.resolve){var o=Hi.resolve();r=function(){o.then(n)}}else r=function(){Vi.call(qi,n)};else{var a=!0,i=document.createTextNode("");new Gi(n).observe(i,{characterData:!0}),r=function(){i.data=a=!a}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}(),Ol=Yi,Ll=Qi,Cl=nl,xl=gl.TypeError,Nl=gl.process,Il=gl.Promise,jl="process"==yl(Nl),Tl=function(){},Pl=dl=Ol.f,$l=!!function(){try{var e=Il.resolve(1),t=(e.constructor={})[Oo("species")]=function(e){e(Tl,Tl)};return(jl||"function"==typeof PromiseRejectionEvent)&&e.then(Tl)instanceof t}catch(e){}}(),Rl=function(e){var t;return!(!El(e)||"function"!=typeof(t=e.then))&&t},Dl=function(e,t){if(!e._n){e._n=!0;var r=e._c;Sl(function(){for(var n=e._v,o=1==e._s,a=0;r.length>a;)!function(t){var r,a,i=o?t.ok:t.fail,l=t.resolve,s=t.reject,c=t.domain;try{i?(o||(2==e._h&&Ml(e),e._h=1),!0===i?r=n:(c&&c.enter(),r=i(n),c&&c.exit()),r===t.promise?s(xl("Promise-chain cycle")):(a=Rl(r))?a.call(r,l,s):l(r)):s(n)}catch(e){s(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&Bl(e)})}},Bl=function(e){kl.call(gl,function(){var t,r,n,o=e._v,a=Wl(e);if(a&&(t=Ll(function(){jl?Nl.emit("unhandledRejection",o,e):(r=gl.onunhandledrejection)?r({promise:e,reason:o}):(n=gl.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=jl||Wl(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},Wl=function(e){return 1!==e._h&&0===(e._a||e._c).length},Ml=function(e){kl.call(gl,function(){var t;jl?Nl.emit("rejectionHandled",e):(t=gl.onrejectionhandled)&&t({promise:e,reason:e._v})})},Jl=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),Dl(t,!0))},zl=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw xl("Promise can't be resolved itself");(t=Rl(e))?Sl(function(){var n={_w:r,_d:!1};try{t.call(e,ml(zl,n,1),ml(Jl,n,1))}catch(e){Jl.call(n,e)}}):(r._v=e,r._s=1,Dl(r,!1))}catch(e){Jl.call({_w:r,_d:!1},e)}}};$l||(Il=function(e){_l(this,Il,"Promise","_h"),wl(e),fl.call(this);try{e(ml(zl,this,1),ml(Jl,this,1))}catch(e){Jl.call(this,e)}},fl=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},fl.prototype=function(e,t,r){for(var n in t)ol(e,n,t[n],r);return e}(Il.prototype,{then:function(e,t){var r=Pl(Al(this,Il));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=jl?Nl.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Dl(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),hl=function(){var e=new fl;this.promise=e,this.resolve=ml(zl,e,1),this.reject=ml(Jl,e,1)},Ol.f=Pl=function(e){return e===Il||e===vl?new hl(e):dl(e)}),bl(bl.G+bl.W+bl.F*!$l,{Promise:Il}),ea(Il,"Promise"),function(e){var t=al[e];ll&&t&&!t[sl]&&il.f(t,sl,{configurable:!0,get:function(){return this}})}("Promise"),vl=qr.Promise,bl(bl.S+bl.F*!$l,"Promise",{reject:function(e){var t=Pl(this);return(0,t.reject)(e),t.promise}}),bl(bl.S+bl.F*!$l,"Promise",{resolve:function(e){return Cl(this,e)}}),bl(bl.S+bl.F*!($l&&function(e,t){if(!t&&!ul)return!1;var r=!1;try{var n=[7],o=n[cl]();o.next=function(){return{done:r=!0}},n[cl]=function(){return o},e(n)}catch(e){}return r}(function(e){Il.all(e).catch(Tl)})),"Promise",{all:function(e){var t=this,r=Pl(t),n=r.resolve,o=r.reject,a=Ll(function(){var r=[],a=0,i=1;Fl(e,!1,function(e){var l=a++,s=!1;r.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,r[l]=e,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(e){var t=this,r=Pl(t),n=r.reject,o=Ll(function(){Fl(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}});var ql=global.console,Vl=["off","error","warn","info","log","debug","trace"],Gl={},Ul={setNativeConsole:o,resetNativeConsole:a},Hl=global.history,Zl={setNativeRouter:i,resetNativeRouter:l};global.Env&&"ios"===global.Env.platform&&(global.Promise=void 0);var Kl=global.setTimeout,Xl=global.setInterval,Yl=global.requestAnimationFrame;global.setTimeoutNative=function(e,t,r){Kl(function(){global.setTimeoutCallback(t)},r)},global.setIntervalNative=function(e,t,r){Xl(function(){global.setIntervalCallback(t)},r)},global.requestAnimationFrameNative=function(e,t,r){Yl(function(){global.requestAnimationFrameCallback(t)},r)};var Ql=global.clearTimeout,es=global.setTimeoutNative,ts=global.clearInterval,rs=global.setIntervalNative,ns=global.cancelAnimationFrame,os=global.requestAnimationFrameNative,as={setNativeConsole:Ul.setNativeConsole,resetNativeConsole:Ul.resetNativeConsole,setNativeTimer:s,resetNativeTimer:c,setNativeRouter:Zl.setNativeRouter,resetNativeRouter:Zl.resetNativeRouter,freezePrototype:u},is={},ls=1,ss=function e(){this.nodeType=e.nodeType.Unknown,this.ref=w(),this.children=[],this.layoutChildren=[],this.parentNode=null,this.nextSibling=null,this.previousSibling=null};ss.prototype.renderParent=function(){for(var e=this.parentNode;e&&!e.supportRender();)e=e.parentNode;return e},ss.prototype.renderRef=function(){var e=[];return this.nodeType===ss.nodeType.Fragment?this.layoutChildren.forEach(function(t){e=e.concat(t.renderRef())}):e.push(this.ref),e},ss.prototype.renderCount=function(){var e=this.supportRender()?1:0;return this.nodeType===ss.nodeType.Fragment&&this.layoutChildren.forEach(function(t){e+=t.renderCount()}),e},ss.prototype.renderIndex=function(){var e=this.parentNode;if(!e||!this.supportLayout())return"document"===this.type?0:-1;var t=e.renderChildIndex(this),r=0;return e.supportRender()||(r=e.renderIndex()),t<0||r<0?-1:t+r},ss.prototype.renderChildIndex=function(e){var t=this;if(!this.layoutChildren||this.layoutChildren.length<=0)return-1;var r=this.layoutChildren.indexOf(e);if(r>0){var n=0+r;r=0;for(var o=0;o<n;o++)r+=t.layoutChildren[o].renderCount()}return r},ss.prototype.destroy=function(){var e=f(this.docId);e&&(delete this.docId,delete e.nodeMap[this.ref]),this.children.forEach(function(e){e.destroy()})},ss.prototype.supportRender=function(){return this.nodeType>ss.nodeType.Unknown&&this.nodeType<ss.nodeType.Fragment},ss.prototype.supportLayout=function(){return this.nodeType>ss.nodeType.Unknown&&this.nodeType<ss.nodeType.Comment},ss.prototype.nextLayoutElement=function(){for(var e=this.nextSibling;e;){if(e.supportLayout())return e;e=e.nextSibling}},ss.prototype.prevLayoutElement=function(){for(var e=this.previousSibling;e;){if(e.supportLayout())return e;e=e.previousSibling}},ss.prototype.layoutElementIndex=function(){for(var e=this.previousSibling,t=0;e;)e.supportLayout()&&(t+=1),e=e.previousSibling;return t},ss.documentId="-1",ss.rootId="-2",ss.nodeType={Unknown:0,Document:1,Element:2,Fragment:512,Comment:1024};var cs=function(e){function t(t){e.call(this),this.nodeType=e.nodeType.Comment,this.type="comment",this.value=t,this.children=[],this.layoutChildren=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return"\x3c!-- "+this.value+" --\x3e"},t}(ss),us={ID:1e6,CLASS:1e3,TAG:1,GAP:1e3},ps={name:null,order:0,score:0,style:null},fs=[{newN:"t",oldN:"type",newV:["d","a","t","u","p","pe"],oldV:["descendant","attribute","tag","universal","pseudo","pseudo-element"]},{newN:"n",oldN:"name"},{newN:"i",oldN:"ignoreCase"},{newN:"a",oldN:"action"},{newN:"v",oldN:"value"}],ds="div",hs=function(e){function t(t,r){void 0===t&&(t=ds),e.call(this),r=r||{},this.nodeType=e.nodeType.Element,this.type=t,this.attr=r.attr||{},this.style=r.style||{},this.classStyle=r.classStyle||{},this.tagStyle=r.tagStyle||{},this.idStyle=r.idStyle||{},this.compoundStyle=r.compoundStyle||{},this.usedPropertyMap={},this.event={},this.children=[],this.layoutChildren=[],this.id=null,this.classList=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.appendChild=function(t,r){if(!t.parentNode||t.parentNode===this)if(t.parentNode){if(E(t,this.children,this.children.length,!0),t.supportLayout()){var n=E(t,this.layoutChildren,this.layoutChildren.length),o=h(this.docId);if(o&&n>=0){var a=t.renderIndex();return o.moveNode(t,this,a)}}}else if(g(t,this),y(t,this.children,this.children.length,!0),this.docId&&v(this.docId,t),r&&r(),t.supportLayout()){y(t,this.layoutChildren,this.layoutChildren.length);var i=h(this.docId);if(i){var l=-1;return this.nodeType===e.nodeType.Fragment&&(l=t.renderIndex()),i.addNode(t,this,l)}}},t.prototype.moveChild=function(e,t){if(e.parentNode&&e.parentNode===this&&(this.layoutChildren.push(e),e.supportLayout())){var r=h(this.docId);if(r&&t>=0){var n=e.renderIndex();return r.moveNode(e,this,n)}}},t.prototype.insertBefore=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t))if(e.parentNode){if(E(e,this.children,this.children.indexOf(t),!0),e.supportLayout()){var r=E(e,this.layoutChildren,e.layoutElementIndex()),n=h(this.docId);if(n&&r>=0){var o=e.renderIndex();return n.moveNode(e,this,o)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t),!0),this.docId&&v(this.docId,e),e.supportLayout()){var a=t.supportLayout()?t:t.nextLayoutElement(),i=y(e,this.layoutChildren,a?this.layoutChildren.indexOf(a):this.layoutChildren.length),l=h(this.docId);if(l&&i>=0){var s=e.renderIndex();return l.addNode(e,this,s)}}},t.prototype.insertAfter=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t))if(e.parentNode){if(E(e,this.children,this.children.indexOf(t)+1,!0),e.supportLayout()){var r=E(e,this.layoutChildren,e.layoutElementIndex()),n=h(this.docId);if(n&&r>=0){var o=e.renderIndex();return n.moveNode(e,this,o)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&v(this.docId,e),e.supportLayout()){var a=t.supportLayout()?t:t.prevLayoutElement(),i=y(e,this.layoutChildren,this.layoutChildren.indexOf(a)+1),l=h(this.docId);if(l&&i>=0){var s=e.renderIndex();return l.addNode(e,this,s)}}},t.prototype.setAttr=function(e,t,r){if(this.attr[e]!==t||!1===r){this.attr[e]=t;var n=h(this.docId);!r&&n&&n.setAttr(this.ref,e,t)}},t.prototype.setId=function(e,t){this.id===e&&!1!==t||(this.id=e)},t.prototype.setClassList=function(e,t){this.classList===e&&!1!==t||(this.classList=e)},t.prototype.setStyle=function(e,t,r){if(this.style[e]!==t||!1===r){this.style[e]=t;var n=h(this.docId);!r&&n&&n.setStyle(this.ref,e,t)}},t.prototype.setStyles=function(e,t){if(this.style!==e||!1===t){this.style=e;var r=h(this.docId);!t&&r&&r.setStyles(this.ref,e)}},t.prototype.setClassStyle=function(e){this.classStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setIdStyle=function(e){this.idStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setTagStyle=function(e){this.tagStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setCompoundStyle=function(e){this.compoundStyle=e},t.prototype.addEvent=function(e,t){if(!this.event[e]){this.event[e]=t;var r=h(this.docId);r&&r.addEvent(this.ref,e)}},t.prototype.removeEvent=function(e){if(this.event[e]){delete this.event[e];var t=h(this.docId);t&&t.removeEvent(this.ref,e)}},t.prototype.fireEvent=function(e,t){var r=this.event[e];if(r)return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Element "+this.ref+" 执行 fireEvent("+e+")---- "),r.call(this,t)},t.prototype.toStyle=function(){var e=Object.keys(this.tagStyle).length>0&&_({name:this.type,style:this.tagStyle}),t=this.id&&F({name:"#"+this.id,style:this.idStyle}),r=L(this.usedPropertyMap,this.style,t,this.classStyle,e,this.compoundStyle);return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Element "+this.ref+" 执行 toStyle()---- ",JSON.stringify(r)),r},t.prototype.toJSON=function(t){var r=this;void 0===t&&(t=!1);var n={};this.attr&&Object.keys(this.attr).forEach(function(e){var t=r.attr[e];n[e]=null==t?"":t});var o={ref:this.ref.toString(),type:this.type,attr:n,style:this.toStyle()},a=Object.keys(this.event);return a.length&&(o.event=a),this.layoutChildren.length&&(o.children=[],this.layoutChildren.forEach(function(r){var n=r.toJSON(t);r.nodeType===e.nodeType.Fragment?n&&n.length&&(o.children=o.children.concat(n)):o.children.push(n)})),o},t.prototype.toString=function(){return"<"+this.type+" attr="+JSON.stringify(this.attr)+" style="+JSON.stringify(this.toStyle())+">"+this.layoutChildren.map(function(e){return e.toString()}).join("")+"</"+this.type+">"},t.prototype.removeChild=function(t,r){if(t.nodeType===e.nodeType.Fragment){if(t.parentNode){r||(b(t,this.children,!0),b(t,this.layoutChildren));var n=h(this.docId);n&&n.removeNode(t)}t.clear(!1),r||t.destroy()}else{if(t.parentNode&&(b(t,this.children,!0),t.supportLayout())){b(t,this.layoutChildren);var o=h(this.docId);o&&o.removeNode(t)}t.destroy()}},t.prototype.clear=function(){var e=h(this.docId);e&&this.layoutChildren.forEach(function(t){e.removeNode(t)}),this.children.forEach(function(e){e.destroy()}),this.children.length=0,this.layoutChildren.length=0},t}(ss),vs=function(e){function t(){e.call(this),this.nodeType=e.nodeType.Fragment,this.type="fragment",this.children=[],this.layoutChildren=[],this.display=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.appendChild=function(e,t){if(!e.parentNode||e.parentNode===this){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.length,!0),e.supportLayout()){var n=E(e,this.layoutChildren,this.layoutChildren.length),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.length,!0),this.docId&&v(this.docId,e),t&&t(),e.supportLayout()){y(e,this.layoutChildren,this.layoutChildren.length);var i=h(this.docId);if(i){var l=e.renderIndex();return i.addNode(e,r,l)}}}},t.prototype.moveChild=function(e,t){if(e.parentNode&&e.parentNode===this){var r=this.renderParent();if(this.layoutChildren.push(e),e.supportLayout()){var n=h(this.docId),o=e.renderIndex();if(n&&t>=0&&t!==o)return n.moveNode(e,r,o)}}},t.prototype.insertBefore=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t)){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.indexOf(t),!0),e.supportLayout()){var n=E(e,this.layoutChildren,e.layoutElementIndex()),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t),!0),this.docId&&v(this.docId,e),e.supportLayout()){var i=t.supportLayout()?t:t.nextLayoutElement(),l=y(e,this.layoutChildren,i?this.layoutChildren.indexOf(i):this.layoutChildren.length),s=h(this.docId);if(s&&l>=0){var c=e.renderIndex();return s.addNode(e,r,c)}}}},t.prototype.insertAfter=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t)){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.indexOf(t)+1,!0),e.supportLayout()){var n=E(e,this.layoutChildren,e.layoutElementIndex()),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&v(this.docId,e),e.supportLayout()){var i=t.supportLayout()?t:t.prevLayoutElement(),l=y(e,this.layoutChildren,this.layoutChildren.indexOf(i)+1),s=h(this.docId);if(s&&l>=0){var c=e.renderIndex();return s.addNode(e,r,c)}}}},t.prototype.removeChild=function(t,r){if(t.nodeType===e.nodeType.Fragment){if(t.parentNode){r||(b(t,this.children,!0),b(t,this.layoutChildren));var n=h(this.docId);n&&n.removeNode(t)}t.clear(!1),r||t.destroy()}else{if(t.parentNode&&(b(t,this.children,!0),t.supportLayout())){b(t,this.layoutChildren);var o=h(this.docId);o&&o.removeNode(t)}t.destroy()}},t.prototype.clear=function(e){if(void 0===e&&(e=!0),e){var t=h(this.docId);t&&this.layoutChildren.forEach(function(e){t.removeNode(e)})}this.children.forEach(function(e){e.destroy()}),this.children.length=0,this.layoutChildren.length=0},t.prototype.toJSON=function(t){void 0===t&&(t=!1);var r=[],n=[];if(t){var o={ref:this.ref.toString(),type:this.type,children:[]};r.push(o)}return this.layoutChildren.length&&this.layoutChildren.forEach(function(r){var o=r.toJSON(t);r.nodeType===e.nodeType.Fragment?o&&o.length&&(n=n.concat(o)):n.push(o)}),t?r[0].children=n:r=n,r},t.prototype.toString=function(){var e="";return this.children.length&&(e=this.children.map(function(e){return e.toString()}).join("")),e},t}(ss),gs=function e(t,r){if(r instanceof e)return r;this.timestamp=Date.now(),this.detail=r,this.type=t;var n=!1;this.stop=function(){n=!0},this.hasStopped=function(){return n}},ms=["onCreate","onInit","onReady","onShow","onHide","onDestroy","onBackPress","onMenuPress","onUpdateData","onOrientationChange"];gs.reserveEvents=ms,gs.isReservedEvent=function(e){return ms.indexOf(e)>=0};var ys,bs=Object.prototype.hasOwnProperty,Es=Array.isArray||function(e){return e instanceof Array},ws=["$idx","$item","$evt"],_s=Object.prototype.toString,Fs="[object Object]",As="__proto__"in{};"undefined"!=typeof Set&&Set.toString().match(/native code/)?ys=Set:(ys=function(){this.set=Object.create(null)},ys.prototype.has=function(e){return void 0!==this.set[e]},ys.prototype.add=function(e){null==e||this.set[e]||(this.set[e]=1)},ys.prototype.clear=function(){this.set=Object.create(null)});var ks=/-(\w)/g,Ss=function(e){var t=Object.create(null);return function(r){return t[r]||(t[r]=e(r))}}(function(e){return e.replace(ks,M)}),Os=Array.prototype,Ls=Object.create(Os);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Os[e];N(Ls,e,function(){for(var r=arguments,n=arguments.length,o=new Array(n);n--;)o[n]=r[n];var a,i=t.apply(this,o),l=this.__ob__;switch(e){case"push":case"unshift":a=o;break;case"splice":a=o.slice(2)}return a&&l.observeArray(a),l.dep.notify(),i})}),N(Os,"$set",function(e,t){return e>=this.length&&(this.length=e+1),this.splice(e,1,t)[0]}),N(Os,"$remove",function(e){this.length&&("number"!=typeof e&&(e=this.indexOf(e)),e>-1&&this.splice(e,1))});var Cs=/^@(app)-application\//,xs=/^@(app)-component\//,Ns=/^@(app)-module\//,Is=function(e){return!!e.match(Cs)},js=function(e){return!!e.match(xs)},Ts=["manifest","config","router","data","props","style","template"],Ps=["if","for","show","tid"],$s=0,Rs=function(e,t){this.id=e,this.options=t||{},this.name="",this.entry="",this.customComponentMap={},this.designWidth=750,this._def=null,this._data={},this._events={},this.callbacks={},this._status=null},Ds={$data:{},$def:{},$status:{},$valid:{}};Rs.prototype.$clear=function(){this.options={},this.name="",this.customComponentMap={},this.designWidth=750,this._def=null,this._data={},this._events={},this._status=null},Ds.$data.get=function(){return R(this._data)||(this._data={}),this._data},Ds.$data.set=function(e){var t=this,r="function"==typeof e?e():e;r?(this._data=this._data||{},Object.keys(r).forEach(function(e){B(e)?console.error("### App Framework ### 页面数据属性名 '"+e+"' 非法, 属性名不能以$或_开头"):(e in t._data&&console.warn("### App Framework ### App 全局数据 ("+e+") 被覆盖"),t._data[e]=r[e])})):(this._data={},console.warn("### App Framework ### App 全局数据被清空"))},Ds.$def.get=function(){return this._def},Ds.$def.set=function(e){var t=this;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据初始化----"),this._def=e;var r=e.manifest;if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据manifest----",JSON.stringify(r)),r){this.name=r.name;var n=r.config;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据config----",JSON.stringify(n)),n&&(this.$data=n.data,this.designWidth=n.designWidth||750,this.designWidth<320&&(this.designWidth=320));var o=r.router;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据router----",JSON.stringify(o)),o&&(this.entry=o.entry||"")}for(var a in e){"function"!=typeof e[a]||gs.isReservedEvent(a)||(t[a]=e[a])}this.$on("applc:onCreate",function(e){this._status=e.type.toLowerCase().replace(/.*:on/,"")}),this.$on("applc:onDestroy",function(e){this._status=e.type.toLowerCase().replace(/.*:on/,"")}),gs.reserveEvents.forEach(function(r){t.$on("applc:"+r,e[r])})},Ds.$status.get=function(){return this._status},Ds.$valid.get=function(){return"create"===this._status},Rs.prototype.$emit=function(e,t){var r=this,n=this._events,o=n[e];if(o)for(var a=0;a<o.length;a++){var i=new gs(e,t);o[a].call(r,i)}},Rs.prototype.$on=function(e,t){if(e&&"function"==typeof t){var r=this._events;r[e]=r[e]||[],r[e].push(t)}},Rs.prototype.$off=function(e){if(e){delete this._events[e]}},Object.defineProperties(Rs.prototype,Ds),Object.freeze(Rs),Object.freeze(Rs.prototype);var Bs={},Ws={nativeComponentMap:Bs},Ms={},Js=["success","cancel","fail","complete"],zs=0,qs=[],Vs=function(){this.id=zs++,this.subs=[]};Vs.prototype.addSub=function(e){this.subs.push(e)},Vs.prototype.removeSub=function(e){I(this.subs,e)},Vs.prototype.depend=function(){Vs.target&&Vs.target.addLink(this)},Vs.prototype.notify=function(){for(var e=this.subs.slice(),t=0,r=e.length;t<r;t++)e[t].update()},Vs.target=null,Vs.pushTarget=function(e){Vs.target&&qs.push(Vs.target),Vs.target=e},Vs.popTarget=function(){Vs.target=qs.pop()},Vs.resetTarget=function(){Vs.target=null,qs=[]};var Gs=Object.getOwnPropertyNames(Ls),Us=function(e){if(this.value=e,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建 XObserver----目标:",JSON.stringify(e)),this.dep=new Vs,N(e,"__ob__",this),Array.isArray(e)){(As?Y:Q)(e,Ls,Gs),this.observeArray(e)}else this.walk(e)};Us.prototype.walk=function(e){var t=this;for(var r in e)t.convert(r,e[r])},Us.prototype.observeArray=function(e){for(var t=0,r=e.length;t<r;t++)Us.$ob(e[t])},Us.prototype.convert=function(e,t){ee(this.value,e,t)},Us.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},Us.prototype.removeVm=function(e){I(this.vms,e)},Us.$ob=function(e,t){if(R(e)){var r;return j(e,"__ob__")&&e.__ob__ instanceof Us?r=e.__ob__:(Array.isArray(e)||D(e))&&Object.isExtensible(e)&&(r=new Us(e)),r&&t&&r.addVm(t),r}};var Hs=0,Zs=function(e,t,r,n){n&&x(this,n),this.vm=e,e._watchers.push(this),this.expression=t,this.cb=r,this.id=Hs++,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建 XWatcher "+this.id+" "+this.expression.toString()),this.active=!0,this.links=[],this.linkIds=W(),this.newLinks=[],this.newLinkIds=W(),"function"==typeof t&&(this.getter=t),this.value=this.get()};Zs.prototype.get=function(){Vs.pushTarget(this);var e=this.getter.call(this.vm,this.vm);return Vs.popTarget(),this.clearLink(),e},Zs.prototype.addLink=function(e){var t=e.id;this.newLinkIds.has(t)||(this.newLinkIds.add(t),this.newLinks.push(e),this.linkIds.has(t)||e.addSub(this))},Zs.prototype.clearLink=function(){for(var e=this,t=this.links.length;t--;){var r=e.links[t];e.newLinkIds.has(r.id)||r.removeSub(e)}var n=this.linkIds;this.linkIds=this.newLinkIds,this.newLinkIds=n,this.newLinkIds.clear(),n=this.links,this.links=this.newLinks,this.newLinks=n,this.newLinks.length=0},Zs.prototype.update=function(){if(this.active){var e=this.get();if(e!==this.value||R(e)){var t=this.value;this.value=e,this.cb.call(this.vm,e,t)}}},Zs.prototype.depend=function(){for(var e=this,t=this.links.length;t--;)e.links[t].depend()},Zs.prototype.close=function(){var e=this;if(this.active){I(this.vm._watchers,this);for(var t=this.links.length;t--;)e.links[t].removeSub(e);this.active=!1,this.vm=this.cb=this.value=null}};var Ks=Ws.nativeComponentMap,Xs={attr:"setAttr",style:"setStyle",styles:"setStyles",event:"addEvent"},Ys=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,Qs=/^<\/([-A-Za-z0-9_]+)[^>]*>/,ec=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,tc=He("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),rc=He("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),nc=He("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),oc=He("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),ac=He("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),ic=He("script,style,block"),lc=["NOTE","WARNING","ERROR"],sc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",
honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},cc=["px","%"],uc=/^[-+]?[0-9]*\.?[0-9]+(.*)$/,pc=/^#[0-9a-fA-F]{6}$/,fc=/^#[0-9a-fA-F]{3}$/,dc=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,hc=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/,vc=/^[-+]?[0-9]+$/,gc=/^url\(\s*['"]?\s*([^()]+?)\s*['"]?\s*\)$/,mc=/^[a-zA-Z_][a-zA-Z0-9]*$/,yc=/^[-+]?[0-9]*\.?[0-9]+$/,bc={length:function(e,t){e=(e||"").toString();var r=e.match(uc);if(t||(t=cc),r){var n=r[1];return n?t.indexOf(n.toLowerCase())>=0?{value:e}:{value:parseFloat(e)+t[0],reason:function(e,r,o){return"ERROR: 属性 `"+Ke(e)+"` 不支持单位 `"+n+"`, 目前仅支持 `"+JSON.stringify(t)+"`"}}:{value:parseFloat(e)+t[0],reason:function(e,r,n){return"WARNING: 属性 `"+Ke(e)+"` 没有指定单位，默认为 `"+t[0]+"`"}}}return{value:null,reason:function(e,t,r){return"ERROR: 属性 `"+Ke(e)+"` 的值 `"+t+"` 不正确(仅支持数值)"}}},color:function(e){if(e=(e||"").toString(),e.match(pc))return{value:e};if(e.match(fc))return{value:"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3],reason:function(e,t,r){return"NOTE: 颜色值 `"+t+"` 转换为 `"+r+"`"}};if(sc[e])return{value:sc[e],reason:function(e,t,r){return"NOTE: 颜色值 `"+t+"` 转换为 `"+r+"`"}};var t,r,n,o,a;return(t=dc.exec(e))&&(r=parseInt(t[1]),n=parseInt(t[2]),o=parseInt(t[3]),r>=0&&r<=255&&n>=0&&n<=255&&o>=0&&o<=255)?{value:"rgb("+[r,n,o].join(",")+")"}:(t=hc.exec(e),t&&(r=parseInt(t[1]),n=parseInt(t[2]),o=parseInt(t[3]),a=parseFloat(t[4]),r>=0&&r<=255&&n>=0&&n<=255&&o>=0&&o<=255&&a>=0&&a<=1)?{value:"rgba("+[r,n,o,a].join(",")+")"}:"transparent"===e?{value:"rgba(0,0,0,0)"}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的颜色值 `"+t+"` 无效`"}})},number:function(e){e=(e||"").toString();var t=e.match(yc);return t&&!t[1]?{value:parseFloat(e)}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 无效 ` (仅支持数值)"}}},integer:function(e){return e=(e||"").toString(),e.match(vc)?{value:parseInt(e,10)}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 无效 ` (仅支持整数)"}}},url:function(e){if(e=(e||"").toString().trim(),e.match(/^none$/i))return{value:"none"};var t=gc.exec(e);return t?{value:t[1]}:{value:null,reason:function(e,t,r){return"WARNING: 属性`"+Ke(e)+"` 的值 `"+t+"` 必须是 none 或者 url(...)"}}},name:function(e){return e=(e||"").toString(),e.match(mc)?{value:e}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 格式不正确"}}},enum:function(e,t){var r=e.indexOf(t);return r>0?{value:t}:0===r?{value:t,reason:function(e,t,r){return"NOTE:  属性`"+Ke(e)+"` 的值 `"+t+"` 是缺省值(可以忽略不写)"}}:{value:null,reason:function(t,r,n){return"ERROR: 属性`"+Ke(t)+"` 的值 `"+r+"` 无效 ` (有效枚举值为: `"+e.join("`|`")+"`)"}}},arraylength:function(e,t,r){t=(t||"").toString();var n=t.split(/\s+/);if(n&&n.length<=4){var o,a=[],i=[],l=0;return n.forEach(function(e,t){if(o=bc.length(e,r),Ye(o.value)&&a.push(o.value),o.reason){var n=o.reason(t.toString(),e,o.value),s=n.match(/^([A-Z]+):/);if(s){var c=lc.indexOf(s[1]);l<lc.indexOf(s[1])&&(l=c),n=n.replace(s[0],"").trim()}i.push(n)}}),{value:l<2?Xe(e,a):null,reason:i.length>0?function(e,t,r){return lc[l]+": 属性`"+Ke(e)+"` 的值 `"+t+"` 存在问题: \n  "+i.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 格式不正确"}}},arraycolor:function(e,t){t=(t||"").toString();var r=t.split(/\s+/);if(r&&r.length<=4){var n,o=[],a=[],i=0;return r.forEach(function(e,t){if(n=bc.color(e),Ye(n.value)&&o.push(n.value),n.reason){var r=n.reason(t.toString(),e,n.value),l=r.match(/^([A-Z]+):/);if(l){var s=lc.indexOf(l[1]);i<lc.indexOf(l[1])&&(i=s),r=r.replace(l[0],"").trim()}a.push(r)}}),{value:i<2?Xe(e,o):null,reason:a.length>0?function(e,t,r){return lc[i]+": 属性`"+Ke(e)+"` 的值 `"+t+"` 存在问题: \n  "+a.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 格式不正确"}}},border:function(e,t){e=(e||"").toString();var r=e.split(/\s+/);if(r&&r.length<=3){var n,o=[],a=[],i=0,l=[],s=-1;return r.forEach(function(e,r){if(Ye(bc.length(e,t).value)?(l.push(0),n=Ec.borderWidth(e),n.value instanceof Array&&(o=o.concat(n.value))):Ye(Ec.borderStyle(e).value)?(l.push(1),n=Ec.borderStyle(e),o.push({n:"borderStyle",v:e})):Ye(bc.color(e).value)?(l.push(2),n=Ec.borderColor(e),n.value instanceof Array&&(o=o.concat(n.value))):(n={},i=2,a.push("属性`"+r+"` 的值 `"+e+"` 存在问题: \n  不满足width、style和color的检验标准")),n&&n.reason){var s=n.reason(r.toString(),e,n.value),c=s.match(/^([A-Z]+):/);if(c){var u=lc.indexOf(c[1]);i<lc.indexOf(c[1])&&(i=u),s=s.replace(c[0],"").trim()}a.push(s)}}),l.forEach(function(e){e>s?s=e:(i=2,a.push("必须按顺序设置属性width style color"))}),{value:i<2?o:null,reason:a.length>0?function(e,t,r){return lc[i]+": 属性`"+Ke(e)+"` 的值 `"+t+"` 存在问题: \n  "+a.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+t+"` 格式不正确"}}},display:function(e){e=(e||"").toString();var t=["flex","none"],r=t.indexOf(e);return r>0?{value:e}:"block"===e?{value:"flex",reason:function(e,r,n){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+r+"` 需修改为flex ` (有效枚举值为: `"+t.join("`|`")+"`)"}}:0===r?{value:e,reason:!1}:{value:null,reason:function(e,r,n){return"ERROR: 属性`"+Ke(e)+"` 的值 `"+r+"` 无效 ` (有效枚举值为: `"+t.join("`|`")+"`)"}}}},Ec={width:bc.length,height:bc.length,padding:tt("arraylength",["paddingTop","paddingRight","paddingBottom","paddingLeft"]),paddingLeft:bc.length,paddingRight:bc.length,paddingTop:bc.length,paddingBottom:bc.length,margin:tt("arraylength",["marginTop","marginRight","marginBottom","marginLeft"]),marginLeft:bc.length,marginRight:bc.length,marginTop:bc.length,marginBottom:bc.length,border:bc.border,borderWidth:tt("arraylength",["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]),borderLeftWidth:bc.length,borderTopWidth:bc.length,borderRightWidth:bc.length,borderBottomWidth:bc.length,borderColor:tt("arraycolor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]),borderLeftColor:bc.color,borderTopColor:bc.color,borderRightColor:bc.color,borderBottomColor:bc.color,borderStyle:et(["solid","dotted","dashed"]),borderRadius:bc.length,borderBottomLeftRadius:bc.length,borderBottomRightRadius:bc.length,borderTopLeftRadius:bc.length,borderTopRightRadius:bc.length,flex:bc.number,flexGrow:bc.number,flexShrink:bc.number,flexBasis:bc.length,flexDirection:et(["row","column"]),flexWrap:et(["nowrap","wrap","wrap-reverse"]),justifyContent:et(["flex-start","flex-end","center","space-between"]),alignItems:et(["stretch","flex-start","flex-end","center"]),alignContent:et(["stretch","flex-start","flex-end","center","space-between","space-around"]),position:et(["none","fixed"]),top:bc.length,bottom:bc.length,left:bc.length,right:bc.length,zIndex:bc.integer,opacity:bc.number,backgroundColor:bc.color,backgroundImage:bc.url,backgroundRepeat:et(["no-repeat","repeat","repeat-x","repeat-y"]),backgroundPosition:bc.position,display:bc.display,visibility:et(["visible","hidden"]),lines:bc.integer,color:bc.color,fontSize:bc.length,fontStyle:et(["normal","italic"]),fontWeight:et(["normal","bold"]),textDecoration:et(["none","underline","line-through"]),textAlign:et(["left","center","right"]),lineHeight:bc.length,textOverflow:et(["clip","ellipsis"]),placeholderColor:bc.color,selectedColor:bc.color,textColor:bc.color,timeColor:bc.color,textHighlightColor:bc.color,strokeWidth:bc.length,progressColor:bc.color,resizeMode:et(["cover","contain","stretch","center"]),columns:bc.number,columnSpan:bc.number},wc={img:"image",p:"text",h1:"text",h2:"text",h3:"text",h4:"text",h5:"text",h6:"text",b:"span",strong:"span",i:"span",del:"span",article:"div",br:"span"},_c={div:{},h1:{fontSize:"60px",fontWeight:"normal"},h2:{fontSize:"45px",fontWeight:"normal"},h3:{fontWeight:"normal",fontSize:"35px"},h4:{fontWeight:"normal",fontSize:"30px"},h5:{fontWeight:"normal",fontSize:"25px"},h6:{fontWeight:"normal",fontSize:"20px"},b:{fontWeight:"bold"},strong:{fontWeight:"bold"},i:{fontStyle:"italic"},a:{color:"#00BFFF"},del:{textDecoration:"line-through"}},Fc={br:{value:"\n"}},Ac={compile:st},kc=1,Sc=function e(t,r,n,o,a,i){var l=this;n=n||{},this.__id__=kc++,this._type=t,this._page=n._page||{},this._parent=n._realParent?n._realParent:n instanceof e?n:void 0,this._root=this._parent?this._parent._root:this,this._valid=!0,this._visible=!1,n._childrenVms&&n._childrenVms.push(this),!r&&this._page.app&&this._page.app.customComponentMap&&(r=Vt(this._page.app,this._page,t)),r=r||{};var s=r.data||{};this._options=r,this._methods={},Object.keys(r).forEach(function(e){if(!q(e)&&!gs.isReservedEvent(e)){var t=r[e];"function"==typeof t&&(l._methods[e]=t)}}),this._css={style:r.style||{},selector:Dt(r.style)},this._ids={},this._vmEvents={},this._childrenVms=[],this._props={},this._parentWatchers=[],Rt(this,i),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm("+this._type+")初始化完成"),this.$emit("xlc:onCreate"),this._created=!0,"function"==typeof s?this._data=s.call(this)||{}:(this._data={},x(this._data,s)),this._page&&this._page.app&&x(this._data,this._page.app.$data),a&&x(this._data,a),$t(this),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm("+this._type+")创建成功"),this.$emit("xlc:onInit"),this._inited=!0,this._page.doc&&(this._parentElement=o||this._page.doc.rootElement,ut(this))},Oc={$app:{},$page:{},$valid:{},$visible:{}};Oc.$app.get=function(){return this._page.app},Oc.$page.get=function(){var e=this._page;return Object.assign({setTitleBar:function(t){e&&e.doc&&(console.log("### App Framework ### 页面 "+e.id+" 调用 setTitleBar ----"),e.doc.listener.updatePageTitleBar(t))}},e&&e.intent)},Oc.$valid.get=function(){return!!this._valid},Oc.$visible.get=function(){return this.$valid&&!!this._visible},Sc.prototype.$parent=function(){return this._parent},Sc.prototype.$root=function(){return this._root},Sc.prototype.$emit=function(e,t){var r=this,n=this._vmEvents,o=n[e];if(o){var a=new gs(e,t),i=[];return o.forEach(function(e){i.push(e.call(r,a))}),i.length>0&&i[0]}return!1},Sc.prototype.$emitElement=function(e,t,r){if(void 0===r&&(r=-1),-1===r||void 0===r)r=void 0;else if("string"!=typeof r)return void console.error("### App Framework ### emitElement的参数id不合法");var n=this.$element(r);if(n){var o=new gs(e,t);return n.fireEvent(e,o)}console.error("### App Framework ### emitElement执行失败: 找不到id为 '"+r+"' 的组件")},Sc.prototype.$dispatch=function(e,t){var r=new gs(e,t);this.$emit(e,r),!r.hasStopped()&&this._parent&&this._parent.$dispatch&&this._parent.$dispatch(e,r)},Sc.prototype.$broadcast=function(e,t){var r=new gs(e,t);this.$emit(e,r),!r.hasStopped()&&this._childrenVms&&this._childrenVms.forEach(function(t){t.$broadcast(e,r)})},Sc.prototype.$on=function(e,t){if(e&&"function"==typeof t){var r=this._vmEvents,n=r[e]||[];n.push(t),r[e]=n}},Sc.prototype.$off=function(e,t){if(e){var r=this._vmEvents;if(!t)return void delete r[e];var n=r[e];n&&n.$remove(t)}},Sc.prototype.$forceUpdate=function(){var e=this._page;if(e&&e.doc){console.log("### App Framework ### 强制更新页面 ---- "+e.id);var t=rr(e);this._ready&&t&&e.doc.listener.updateFinish()}},Sc.prototype.$set=function(e,t){Sc.parseExpression(e).set.call(this,this,t)},Sc.prototype.$delete=function(e){var t=this._data;Sc.delete(t,e)},Sc.prototype.$watch=function(e,t){var r=this;return"string"!=typeof e||"string"!=typeof t?void console.error("### App Framework ### $watch调用异常: 参数的数据类型非法, 必须是字符串"):this._methods[t]?new Zs(r,function(){return Sc.getPath(r,e)},function(e,n){"object"!=typeof e&&e===n||r[t](e,n)}).value:void console.warn("### App Framework ### $watch调用异常:  句柄函数名 '"+t+"' 没有定义")},Sc.prototype._digest=function(){for(var e=this,t=this._watchers.length,r=0;r<t;r++)e._watchers[r].update(!0)},Object.defineProperties(Sc.prototype,Oc),Sc.parseExpression=function(e){return{exp:e,get:function(t){return Sc.getPath(t,e)},set:function(t,r){Sc.setPath(t,e,r)}}},Sc.getPath=function(e,t){if(/[^\w.$]/.test(t))return void console.warn("### App Framework ### getPath调用:  观察对象 '"+t+"' 不合法");for(var r=t.split("."),n=r.pop(),o=r.length,a=0;a<o;a++){var i=r[a];if(B(i))return void console.warn("### App Framework ### getPath调用: 属性名 '"+i+"' 不能以 $ 或 _ 开头");if(!e[i])return void console.warn("### App Framework ### getPath调用: 属性名 '"+i+"' 在 '"+t+"' 中值为："+e[i]);e=e[i]}return e[n]},Sc.setPath=function(e,t,r){if(/[^\w.$]/.test(t))return void console.warn("### App Framework ### setPath调用:  观察对象 '"+t+"' 不合法");for(var n=t.split("."),o=n.pop(),a=n.length,i=0;i<a;i++){var l=n[i];if(B(l))return void console.warn("### App Framework ### setPath调用: 属性名 '"+l+"' 不能以 $ 或 _ 开头");if(!e[l])return void console.warn("### App Framework ### setPath调用: 属性名 '"+l+"' 在 '"+t+"' 中值为："+e[l]);e=e[l]}Sc.set(e,o,r)},Sc.set=function(e,t,r){if(null!=e){if(e instanceof Sc)return void Sc.set(e._data,t,r);if(Array.isArray(e))return e.splice(t,1,r);if(j(e,t))return void(e[t]=r);var n=e.__ob__;if(!n)return void(e[t]=r);if(n.convert(t,r),n.dep.notify(),n.vms)for(var o=n.vms.length;o--;){var a=n.vms[o];P(a,"_data",t),a._digest()}return r}},Sc.delete=function(e,t){if(null!=e&&j(e,t)){delete e[t];var r=e.__ob__;if(r&&(r.dep.notify(),r.vms))for(var n=r.vms.length;n--;){var o=r.vms[n];$(o,t),o._digest()}}};var Lc=function(e,t,r,n){console.log("### App Framework ### 启动页面---- "+t);var o;if(!js(t))return new Error("bootstrap: 错误页面名: "+t);o=z(t),r=D(r)?r:{},e.name=o,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建页面---- "+o),e.vm=new Sc(o,null,{_page:e,_type:"mipage"},null,n,{})},Cc=function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 定义组件---- "+t);var o,a;if(a=r.length>1?r[1]:r[0],"function"==typeof a&&(o=a,a=null),!js(t))return new Error("define: 非法组件名 "+t+', 必须是"@app-component/XXXX"格式');if(o){var i=function(t){var r=z(t);return zt(e,r)},l={exports:{}};o(i,l.exports,l,l.exports),a=l.exports,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 初始化组件配置----",JSON.stringify(a))}var s=z(t);global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册自定义组件---- "+s),qt(e.app,e,s,a)},xc={},Nc=function(e,t){this.id=e,this.map=[],this.pre=[],this.post=[],this.page=t};Nc.prototype.isEmpty=function(){return 0===this.map.length},Nc.prototype.append=function(e,t,r,n){var o=this;this.flushTimer||(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 设置SetTimeout"),this.flushTimer=global.setTimeoutWrap(-1,function(){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 执行SetTimeout"),o.flushTimer=0,o.flush(),o.notify()},0));var a=this.map;t in a||(a[t]={});var i=a[t];e in i||(i[e]={});var l=i[e];"element"===e?(r in l||(l[r]=[]),l[r].push(n)):l[r]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 完成")},Nc.prototype.flush=function(){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.flush 开始----");var e=this.pre.slice();this.pre.length=0,e.forEach(function(e){e()});var t=this.map.slice();this.map.length=0,t.forEach(function(e){ar(e,"for"),ar(e,"if"),ar(e,"html"),ar(e,"render"),ir(e,"element")});var r=this.post.slice();this.post.length=0,r.forEach(function(e){e()}),this.isEmpty()||this.flush(),this.flushTimer&&(global.clearTimeoutWrap(this.flushTimer),this.flushTimer=0),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.flush 结束----")},Nc.prototype.notify=function(){if(this.page&&this.page.doc){rr(this.page)&&this.page.doc.listener.updateFinish()}},Nc.prototype.before=function(e){this.pre.push(e)},Nc.prototype.after=function(e){this.post.push(e)};var Ic=function(e,t,r){this.id=e,this.app=t,this.name=null,this.vm=null,this.intent=r,this.doc=new Ws.DomDocument(e,this.app.options.bundleUrl,null),this.doc.designWidth=this.app.designWidth,this.differ=new Nc(e,this),this.callbacks={}};Object.freeze(Ic),Object.freeze(Ic.prototype);var jc=function(e,t,r,n){console.log("### App Framework ### 启动App---- "+t);var o;if(!Is(t))return new Error("bootstrap: 错误App名: "+t);o=z(t),r=D(r)?r:{},e.name=o,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用App("+o+")生命周期---- onCreate"),e.$emit("applc:onCreate")},Tc=function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 定义App---- "+t);var o,a;if(a=r.length>1?r[1]:r[0],"function"==typeof a&&(o=a,a=null),!Is(t))return new Error("define: 无效应用名 "+t);if(o){var i=function(t){var r=z(t);return zt(e,r)},l={exports:{}};o(i,l.exports,l),a=l.exports}global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 初始化App配置---- ",JSON.stringify(a)),e.$def=a},Pc={},$c={},Rc={1:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return er.apply(void 0,[e].concat(t))},2:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return tr.apply(void 0,[e].concat(t))}},Dc=Ws.nativeComponentMap;global.registerMethods=vr;var Bc={init:yr,createApplication:sr,destroyApplication:Sr,createPage:ur,recreatePage:br,refreshPage:Er,destroyPage:kr,changeVisiblePage:wr,backPressPage:_r,menuPressPage:Fr,orientationChangePage:Ar,processCallbacks:fr,processInvokeCallback:pr,registerComponents:dr,registerModules:hr,registerMethods:vr,getAppConfig:mr,getPageRoot:gr,getPage:cr},Wc=function(e,t){this.id=e,this.batchThreshold=50,this.updates=[],this.actionLen=0,"function"==typeof t?Object.defineProperty(this,"handler",{configurable:!0,enumerable:!0,writable:!0,value:t}):console.error("### App Runtime ### handler必须是函数")};Wc.prototype.createFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### createFinish---- ");var t=this.handler,r=t([Or("createFinish")],e);return this.resetActionLen(),r},Wc.prototype.updateFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### updateFinish---- ");var t=this.handler,r=t([Or("updateFinish")],e);return this.resetActionLen(),r},Wc.prototype.refreshFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### refreshFinish---- ");var t=this.handler,r=t([Or("refreshFinish")],e);return this.resetActionLen(),r},Wc.prototype.createBody=function(e){var t=e.toJSON(),r=t.children;delete t.children;var n=[Or("createBody",[t])];return r&&n.push.apply(n,r.map(function(e){return Or("addElement",[t.ref,e,-1])})),this.addActions(n)},Wc.prototype.addNode=function(e,t,r){var n=this;t&&t.supportRender()||console.error("### App Framework ### addNode的parent("+t.type+")必须是可渲染节点"),r<0&&(r=-1);var o;if(e.nodeType===ss.nodeType.Fragment){var a=this,i=r;e.layoutChildren.every(function(e){return o=e.nodeType===ss.nodeType.Fragment?a.addNode(e,t,i):n.addElement(e,t.ref,i),i+=e.renderCount(),-1!==o})}else o=this.addElement(e,t.ref,r);return o},Wc.prototype.addElement=function(e,t,r){return r>=0||(r=-1),this.addActions(Or("addElement",[t,e.toJSON(),r]))},Wc.prototype.removeNode=function(e){var t,r=this;return e.nodeType===ss.nodeType.Fragment?e.layoutChildren.every(function(e){return-1!==(t=e.nodeType===ss.nodeType.Fragment?r.removeNode(e):r.removeElement(e.ref))}):t=this.removeElement(e.ref),t},Wc.prototype.removeElement=function(e){if(Array.isArray(e)){var t=e.map(function(e){return Or("removeElement",[e])});return this.addActions(t)}return this.addActions(Or("removeElement",[e]))},Wc.prototype.moveNode=function(e,t,r){var n=this;t&&t.supportRender()||console.error("### App Framework ### moveNode的parent必须是可渲染节点"),r>=0||(r=-1);var o;if(e.nodeType===ss.nodeType.Fragment){var a=this,i=r;e.layoutChildren.every(function(e){return o=e.nodeType===ss.nodeType.Fragment?a.moveNode(e,t,i):n.moveElement(e.ref,t.ref,i),i+=e.renderCount(),-1!==o})}else o=this.moveElement(e.ref,t.ref,r);return o},Wc.prototype.moveElement=function(e,t,r){return this.addActions(Or("moveElement",[e,t,r]))},Wc.prototype.setAttr=function(e,t,r){var n={attr:{}};return null==r?(console.warn("### App Framework ### 组件 "+e+" 的属性 "+t+" 被修改为 undefined/null, 自动修改为默认值或空值"),n.attr[t]=""):n.attr[t]=r,this.addActions(Or("updateAttrs",[e,n]))},Wc.prototype.setStyle=function(e,t,r){var n={style:{}};return null==r?(console.warn("### App Framework ### 组件 "+e+" 的样式 "+t+" 被修改为 undefined/null, 自动修改为默认值或空值"),n.style[t]=""):n.style[t]=r,this.addActions(Or("updateStyle",[e,n]))},Wc.prototype.setStyles=function(e,t){var r={style:t};return this.addActions(Or("updateStyle",[e,r]))},Wc.prototype.addEvent=function(e,t){return this.addActions(Or("addEvent",[e,t]))},Wc.prototype.removeEvent=function(e,t){return this.addActions(Or("removeEvent",[e,t]))},Wc.prototype.updatePageTitleBar=function(e){return this.addActions(Or("updateTitleBar",[e]))},Wc.prototype.handler=function(e,t){return t&&t()},Wc.prototype.addActions=function(e){var t=this.updates,r=this.handler;if(Array.isArray(e)||(e=[e]),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### addActions---- ",JSON.stringify(e)),this.actionLen+=e.length,0===this.batchThreshold)t.push.apply(t,e);else{if(!(this.batchThreshold>1))return r(e);if(t.push.apply(t,e),t.length>=this.batchThreshold){var n=Bc.getPage(this.id);n&&rr(n)}}},Wc.prototype.hasActions=function(){return!!this.actionLen},Wc.prototype.resetActionLen=function(){this.actionLen=0};var Mc=function e(t,r,n){t=t?t.toString():"",this.id=t,this.URL=r,p(t,this),this.nodeMap={},this.listener=new Wc(t,n||m(t,e.handler)),this.createRootElement()};Mc.prototype.getRef=function(e){return this.nodeMap[e]},Mc.prototype.createRootElement=function(){var e=this;if(!this.rootElement){var t=new hs("document");t.nodeType=ss.nodeType.Document,t.docId=this.id,t.owner=this,t.role="document",t.depth=0,t.ref=ss.documentId,this.nodeMap[t.ref]=t,this.rootElement=t,Object.defineProperty(t,"appendChild",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.appendBody(t)}}),Object.defineProperty(t,"insertBefore",{configurable:!0,enumerable:!0,writable:!0,value:function(t,r){e.appendBody(t,r)}})}return this.rootElement},Mc.prototype.createBody=function(e,t){if(!this.body){var r=new hs(e,t);this.setBody(r)}return this.body},Mc.prototype.createElement=function(e,t){return new hs(e,t)},Mc.prototype.createFragment=function(){return new vs},Mc.prototype.createComment=function(e){return new cs(e)},Mc.prototype.fireEvent=function(e,t,r,n){if(e){if(r=r||{},r.type=t,r.target=e,r.timestamp=Date.now(),n){var o=n.attrs||{};for(var a in o)e.setAttr(a,o[a],!0);var i=n.style||{};for(var l in i)e.setStyle(l,i[l],!0)}return e.fireEvent(t,r)}},Mc.prototype.destroy=function(){delete this.listener,delete this.nodeMap,d(this.id)},Mc.prototype.appendBody=function(e,t){if(this.rootElement.layoutChildren.length>0||e.parentNode)return void(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Document添加多个Body节点----"));var r=this.rootElement.children,n=r.indexOf(t);if(n<0?r.push(e):r.splice(n,0,e),e.supportLayout()){if("body"===e.role)e.docId=this.id,e.owner=this,g(e,this.rootElement);else{e.children.forEach(function(t){t.parentNode=e});var o=e.ref;this.setBody(e),e.docId=this.id,e.owner=this,g(e,this.rootElement),delete this.nodeMap[o]}this.rootElement.layoutChildren.push(e),this.listener.createBody(e)}else e.parentNode=this.rootElement,this.nodeMap[e.ref]=e},Mc.prototype.setBody=function(e){e.role="body",e.depth=1,delete this.nodeMap[e.ref],e.ref=ss.rootId,this.nodeMap[e.ref]=e,this.body=e},Mc.prototype.recreateActions=function(){var e=this.body;if(!e)return void console.error("### App Framework ### Document没有body节点, 无法重建");this.listener.createBody(e)},Mc.handler=null;var Jc=[],zc=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return global.callNative.apply(global,e)};Mc.handler=zc;var qc={DomDocument:Mc,DomElement:hs,DomComment:cs,DomFragment:vs,DomListener:Wc,sendActions:zc},Vc={},Gc={},Uc={},Hc=["registerComponents","registerModules","registerMethods"],Zc=["createApplication","getAppConfig","destroyApplication"],Kc=["createPage","destroyPage","refreshPage","recreatePage","changeVisiblePage","backPressPage","menuPressPage","orientationChangePage",["processCallbacks","execJSBatch"],["processInvokeCallback","execInvokeCallback"],"getPageRoot"],Xc={config:qc,init:Nr,prepare:Ir,setNativeConsole:as.setNativeConsole,resetNativeConsole:as.resetNativeConsole,setNativeTimer:as.setNativeTimer,resetNativeTimer:as.resetNativeTimer,setNativeRouter:as.setNativeRouter,resetNativeRouter:as.resetNativeRouter},Yc=Object.assign||function(e){for(var t=arguments,r=1;r<arguments.length;r++){var n=t[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qc={$child:$r,$vm:Rr,$element:Tr,$rootElement:Pr,$config:Br,$render:Dr,$createElement:Mr,$extend:Yc,$stringify:Wr};Bc.registerMethods(Qc),Object.freeze(Sc);var eu=Xc.config;eu.frameworks={XApp:Bc},Xc.prepare(),global.frameworkVersion=Jr.framework,global.packagerVersion=Jr.packager;var tu=Xc.init(eu);for(var ru in tu)!function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册全局函数----",e),global[e]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=tu[e].apply(tu,t);return n instanceof Error&&console.error(n.toString()),n}}(ru)});
//# sourceMappingURL=web.min.js.map
